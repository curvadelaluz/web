{"version":3,"file":"component---src-pages-repositorio-2-js-34fdc07b48232be71626.js","mappings":"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","sources":["webpack://gatsby-starter-default/./node_modules/datatables.net-dt/js/dataTables.dataTables.js","webpack://gatsby-starter-default/./src/pages/repositorio2.js"],"sourcesContent":["/*! DataTables styling integration\n * ©2018 SpryMedia Ltd - datatables.net/license\n */\n(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['jquery', 'datatables.net'], function ($) {\n      return factory($, window, document);\n    });\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = function (root, $) {\n      if (!root) {\n        root = window;\n      }\n\n      if (!$ || !$.fn.dataTable) {\n        // Require DataTables, which attaches to jQuery, including\n        // jQuery if needed and have a $ property so we can access the\n        // jQuery object that is used\n        $ = require('datatables.net')(root, $).$;\n      }\n\n      return factory($, root, root.document);\n    };\n  } else {\n    // Browser\n    factory(jQuery, window, document);\n  }\n})(function ($, window, document, undefined) {\n  return $.fn.dataTable;\n});","import * as React from \"react\"\r\nimport { Link, graphql, useStaticQuery } from \"gatsby\"\r\nimport { StaticImage } from \"gatsby-plugin-image\"\r\nimport BackgroundImage from 'gatsby-background-image'\r\n\r\nimport * as THREE from \"three\";\r\n\r\nimport Layout from \"../components/layout\"\r\nimport FullScreenSection from \"../components/full-screen-section\"\r\nimport Seo from \"../components/seo\"\r\n\r\nimport styled from 'styled-components'\r\n\r\nimport { Suspense , useRef, useState, useMemo, useEffect } from 'react';\r\n\r\nimport * as d3 from 'd3';\r\n// import tree from 'd3-tree';\r\n\r\nimport { textwrap } from 'd3-textwrap';\r\n\r\nimport { Modal } from 'bootstrap';\r\n\r\nimport * as $ from 'jquery';\r\n\r\n// const dt = require( 'datatables.net' )();\r\n// import * as $.dt from 'datatables.net';\r\n// import dt from 'datatables.net';\r\n\r\n// import dt from 'datatables.net'\r\n\r\n// const jQuery = require('jquery');\r\n\r\n// const $ = jQuery;\r\n\r\nimport DataTable from 'datatables.net';\r\nimport 'datatables.net-dt';\r\n\r\nconst RepositorioPage = () => {\r\n\r\n\r\n$.fn.dataTable = DataTable;\r\n$.fn.dataTableSettings = DataTable.settings;\r\n$.fn.dataTableExt = DataTable.ext;\r\nDataTable.$ = $;\r\n  \r\n$.fn.DataTable = function ( opts ) {\r\n    return $(this).dataTable( opts ).api();\r\n};\r\n\r\n  const data = useStaticQuery(\r\n    graphql`\r\n      query {\r\n        bg1:\r\n\r\n        file(relativePath: { eq: \"pointcloud2.jpg\" }) {\r\n          childImageSharp {\r\n            fluid(quality: 90, maxWidth: 1920) {\r\n              ...GatsbyImageSharpFluid_noBase64\r\n            }\r\n          }\r\n        }\r\n\r\n        bg2:\r\n        file(relativePath: { eq: \"obj.jpg\" }) {\r\n          childImageSharp {\r\n            fluid(quality: 90, maxWidth: 1920) {\r\n              ...GatsbyImageSharpFluid_noBase64\r\n            }\r\n          }\r\n        }\r\n\r\n      }\r\n    `\r\n  )\r\n\r\n  // const cdl_muros = React.lazy(() => import('../images/cdl_muros.obj'))\r\n  \r\n\r\n  // const obj = useLoader(OBJLoader, '../images/cdl_muros.obj')\r\n\r\n  // const data2 = useStaticQuery(\r\n  //   graphql`\r\n  //     query {\r\n  //       desktop: file(relativePath: { eq: \"obj.jpg\" }) {\r\n  //         childImageSharp {\r\n  //           fluid(quality: 90, maxWidth: 1920) {\r\n  //             ...GatsbyImageSharpFluid_noBase64\r\n  //           }\r\n  //         }\r\n  //       }\r\n  //     }\r\n  //   `\r\n  // )\r\n\r\n  const bg1 = data.bg1.childImageSharp.fluid\r\n  const bg2 = data.bg2.childImageSharp.fluid\r\n\r\n  const modalRef = useRef(null);\r\n  const iframeRef = useRef(null);\r\n\r\n  // const showModal = (link) => {\r\n  //   console.log(link);\r\n  //   // let modal = new Modal(document.getElementById('myModal'), {});\r\n  //   // document.getElementById('myModal').show();\r\n  //   // jQuery('#myModal').modal()\r\n  // }\r\n\r\n\r\n  const DrawTable = () => {\r\n\r\n    const [data,setData] = useState([]);\r\n\r\n    fetch(\r\n      \"https://opensheet.elk.sh/1HnOngNCBpJHBp2_GQbo7X_83dDXW-QMdMw-ybb7oaVA/Prensa\"\r\n    )\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setData(data);\r\n      });\r\n\r\n      return (<div className={'table-responsive'}><table className={'table table-striped table-sm'}><tbody>\r\n\r\n            <tr>\r\n              <td>Autor</td>\r\n              <td>Titulo</td>\r\n              <td>Medio</td>\r\n              <td>Fecha</td>\r\n              <td>URL</td>\r\n            </tr>\r\n\r\n        {data.map((val, key) => {\r\n          return (\r\n            <tr key={key}>\r\n              <td>{val['Autor']}</td>\r\n              <td>{val['Título']}</td>\r\n              <td>{val['Medio']}</td>\r\n              <td>{val['Fecha (Día, mes año)']}</td>\r\n              <td><a role='button' href={'#'} onClick={() => {iframeRef.current.src=val['URL']}} data-bs-toggle=\"modal\" data-url={val['URL']} data-bs-target=\"#myModal\">URL</a></td>\r\n            </tr>\r\n          )\r\n        })}     \r\n      </tbody></table></div>);\r\n  }\r\n\r\n  const DrawChart = () => {\r\n\r\n    d3.textwrap = textwrap;\r\n\r\n    const [treeDataSource,setTreeDataSource] = useState([]);\r\n    const svgRef = useRef(null);\r\n    const svgWidth = window.innerWidth-200;\r\n    const svgHeight = window.innerHeight*1.5;\r\n\r\n    var wrap = d3.textwrap().bounds({height: 50, width: 200, x: 15, y: -15});\r\n\r\n    useEffect( () => {\r\n      // drawTree();\r\n\r\n      new Promise( (res, rej) => {\r\n        fetch(\"https://opensheet.elk.sh/1HnOngNCBpJHBp2_GQbo7X_83dDXW-QMdMw-ybb7oaVA/Prensa\")\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n\r\n            // console.log(data);\r\n            let parsedTreeData = data.map( item => {\r\n                return {'name': item['Título']}\r\n              });\r\n\r\n            // setTreeDataSource({'name': 'Prensa', 'children': parsedTreeData})\r\n            // console.log(treeDataSource);\r\n            res({'name': 'Prensa', 'children': parsedTreeData})\r\n            \r\n          });\r\n      }).then( (res) => {\r\n        drawTree(res);\r\n      })\r\n\r\n    // let sheetData = fetch(\r\n    //   \"https://opensheet.elk.sh/1HnOngNCBpJHBp2_GQbo7X_83dDXW-QMdMw-ybb7oaVA/Prensa\"\r\n    // )\r\n    //   .then((res) => res.json())\r\n    //   .then((data) => {\r\n\r\n    //     // console.log(data);\r\n\r\n    //     let parsedTreeData = data.map( item => {\r\n    //         return {'name': item['Título']}\r\n    //       });\r\n\r\n    //     setTreeDataSource({'name': 'Prensa', 'children': parsedTreeData})\r\n    //     // console.log(treeDataSource);\r\n\r\n    //     setTimeout( () => {\r\n    //       console.log(treeDataSource);\r\n    //       drawTree();\r\n    //     }, 5000)\r\n        \r\n    //   });\r\n\r\n\r\n      // modalRef.current.addEventListener('show.bs.modal', function (event) {\r\n      //   console.log(event);\r\n      // })\r\n\r\n    }, [])  \r\n\r\n    const drawTree = (resData) => {\r\n\r\n      console.log('render');\r\n\r\n      let height = svgHeight;\r\n      let width = svgWidth;\r\n      \r\n      let data = d3.hierarchy(resData)\r\n      // const svg = d3.create(\"svg\");\r\n      const svg = d3.select(svgRef.current);\r\n\r\n      let diameter = height * 0.75;\r\n      let radius = diameter / 2;let tree = d3.tree()\r\n          .size([2 * Math.PI, radius])\r\n          .separation(function(a, b) { \r\n              return (a.parent == b.parent ? 1 : 2) / a.depth; \r\n          });\r\n\r\n      let treeData = tree(data);\r\n\r\n      let nodes = treeData.descendants();\r\n      let links = treeData.links();\r\n\r\n      let graphGroup = svg.append('g').attr('transform', \"translate(\"+(width/2)+\",\"+(height/2)+\")\");\r\n\r\n      graphGroup.selectAll(\".link\")\r\n        .data(links)\r\n        .join(\"path\")\r\n        .attr(\"class\", \"link\")\r\n        .attr(\"d\", d3.linkRadial()\r\n          .angle(d => d.x)\r\n          .radius(d => d.y));\r\n\r\n      let node = graphGroup\r\n              .selectAll(\".node\")\r\n              .data(nodes)\r\n              .join(\"g\")\r\n              .attr(\"class\", \"node\")\r\n              .attr(\"transform\", function(d){\r\n                  return `rotate(${d.x * 180 / Math.PI - 90})` \r\n                      + `translate(${d.y}, 0)`;\r\n              });        \r\n\r\n      node.append(\"circle\").attr(\"r\", 3);\r\n\r\n      node.append(\"text\")\r\n        .attr(\"font-family\", \"sans-serif\")\r\n        .attr(\"font-size\", 12)\r\n        .attr(\"width\", 100)\r\n        .attr(\"dx\", function(d) { return d.x < Math.PI ? 8 : -8; })\r\n        .attr(\"dy\", \".25em\")\r\n        .attr(\"text-anchor\", function(d) { \r\n            return d.x < Math.PI ? \"start\" : \"end\"; \r\n        })\r\n        .attr(\"transform\", function(d) { \r\n            return d.x < Math.PI ? null : \"rotate(180)\"; \r\n        })\r\n        .text( function (d) {\r\n          return d.data.name;\r\n          // let dArray = d.data.name.split(\" \");\r\n          // console.log(dArray);\r\n          // if (!(dArray.length > 1)) {\r\n            // return d.data.name;\r\n          // } else {\r\n            // for (let i = 0; i < dArray.length ; i++) {\r\n\r\n              // this.append(\"tspan\").text(dArray[i]+\" \");\r\n              // return <tspan>dArray[i]</tspan>\r\n            // }            \r\n          // }\r\n        })\r\n        // .text(function(d) { \r\n          // let dArray = d.data.name.split(\" \");\r\n          // return d.data.name;\r\n        // });\r\n\r\n\r\n        // node.select(\"text\")\r\n        //   .append(function (d) {\r\n        //     let dArray = d.data.name.split(\" \");\r\n        //     console.dir(dArray);\r\n        //     // dArray.forEach((item) => {\r\n        //       // return <tspan></tspan>\r\n        //     // });\r\n        //   });\r\n\r\n      d3.selectAll('text').call(wrap);\r\n\r\n\r\n    }\r\n\r\n\r\n    // useEffect( () => {\r\n    //   // console.dir(data);\r\n    // }, [data]);\r\n\r\n    \r\n\r\n    \r\n\r\n\r\n    return (<svg ref={svgRef} width={svgWidth} height={svgHeight} />);\r\n\r\n  }\r\n\r\n  return (\r\n\r\n      <Layout>\r\n\r\n        <Seo title=\"Home\" />\r\n\r\n        <FullScreenSection>\r\n\r\n          <BackgroundImage\r\n            Tag=\"section\"\r\n            className={'container-fluid fullheight-ribbon d-flex flex-column'}\r\n            fluid={bg1}\r\n            backgroundColor={`#040e18`}\r\n          >\r\n\r\n          \t<div className={`row flex-1 pt-3`}>\r\n        \t\t        \t\t\r\n              <div className={`col h-100`}>\r\n\r\n                <h1 className={`text-black display-4`}>Repositorio</h1>\r\n                <p className={`text-black`}>Compendio de archivos de video, audio, fotografías y documentos que se relacionen con el mural del Paso Inferior Santa Lucía en un sólo lugar y que puedan servir para orientar a profesores e investigadores de artes visuales, arquitectura, urbanismo y público general con respecto al arte en espacio público.</p>\r\n\r\n                <div className={`text-center`}>\r\n                  <StaticImage\r\n                    alt={`Curva de la Luz`}\r\n                    src=\"../images/repositorio.png\"\r\n                    width={300}\r\n                    quality={95}\r\n                    style={{ \r\n                    }}\r\n                  />                  \r\n                </div>\r\n\r\n                <div className={`mt-3 rounded-3 p-5 mb-5`} style={{ position: \"relative\", width: '100%', backgroundColor: 'rgba(0, 91, 172, 1)' }}>\r\n                  <DrawTable />\r\n                  <DrawChart />\r\n                </div>\r\n                \r\n\r\n              </div>\r\n\r\n          \t</div>\r\n\r\n            <div className={`row ribbon no-gutters`}>\r\n\r\n            \t<div className={`col-3 ribbon-blue`}></div>\r\n            \t<div className={`col-2 ribbon-red`}></div>\r\n            \t<div className={`col-4 ribbon-navy`}></div>\r\n            \t<div className={`col-3 ribbon-gray`}></div>\r\n\r\n            </div>\r\n\r\n          </BackgroundImage>\r\n\r\n        </FullScreenSection>\r\n\r\n        <div ref={modalRef} className={\"modal fade\"} id=\"myModal\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabIndex={-1} aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n          <div className={\"modal-dialog\"}>\r\n            <div className={\"modal-content\"}>\r\n              <div className={\"modal-header\"}>\r\n                <h5 className={\"modal-title\"} id=\"staticBackdropLabel\"></h5>\r\n                <button type=\"button\" className={\"btn-close\"} data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n              </div>\r\n              <div className={\"modal-body\"}>\r\n                 <img ref={iframeRef} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      \r\n      </Layout>\r\n    \r\n  )\r\n\r\n}\r\n\r\nexport default RepositorioPage;\r\n"],"names":["$","window","document","undefined","fn","dataTable","factory","DataTable","opts","this","api","data","useStaticQuery","bg1","childImageSharp","fluid","modalRef","bg2","useRef","iframeRef","DrawTable","useState","setData","fetch","then","res","json","className","map","val","key","role","href","onClick","current","src","DrawChart","d3","textwrap","svgRef","svgWidth","innerWidth","svgHeight","innerHeight","wrap","bounds","height","width","x","y","useEffect","Promise","rej","parsedTreeData","item","drawTree","resData","console","log","svg","radius","treeData","size","Math","PI","separation","a","b","parent","depth","tree","nodes","descendants","links","graphGroup","append","attr","selectAll","join","angle","d","node","text","name","call","ref","title","Tag","backgroundColor","S","alt","quality","style","position","id","tabIndex","type"],"sourceRoot":""}