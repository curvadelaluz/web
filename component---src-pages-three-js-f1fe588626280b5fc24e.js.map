{"version":3,"file":"component---src-pages-three-js-f1fe588626280b5fc24e.js","mappings":"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","sources":["webpack://gatsby-starter-default/./node_modules/core-js/internals/a-constructor.js","webpack://gatsby-starter-default/./node_modules/core-js/internals/native-promise-constructor.js","webpack://gatsby-starter-default/./node_modules/core-js/internals/new-promise-capability.js","webpack://gatsby-starter-default/./node_modules/core-js/internals/promise-resolve.js","webpack://gatsby-starter-default/./node_modules/core-js/internals/species-constructor.js","webpack://gatsby-starter-default/./node_modules/core-js/modules/es.promise.finally.js","webpack://gatsby-starter-default/./node_modules/three/examples/jsm/loaders/GLTFLoader.js","webpack://gatsby-starter-default/./node_modules/three/examples/jsm/controls/OrbitControls.js","webpack://gatsby-starter-default/./src/pages/three.js","webpack://gatsby-starter-default/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["var global = require('../internals/global');\nvar isConstructor = require('../internals/is-constructor');\nvar tryToString = require('../internals/try-to-string');\n\nvar TypeError = global.TypeError;\n\n// `Assert: IsConstructor(argument) is true`\nmodule.exports = function (argument) {\n  if (isConstructor(argument)) return argument;\n  throw TypeError(tryToString(argument) + ' is not a constructor');\n};\n","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n","'use strict';\nvar aCallable = require('../internals/a-callable');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aCallable(resolve);\n  this.reject = aCallable(reject);\n};\n\n// `NewPromiseCapability` abstract operation\n// https://tc39.es/ecma262/#sec-newpromisecapability\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var anObject = require('../internals/an-object');\nvar aConstructor = require('../internals/a-constructor');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aConstructor(S);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar redefine = require('../internals/redefine');\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromise && fails(function () {\n  // eslint-disable-next-line unicorn/no-thenable -- required for testing\n  NativePromise.prototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.es/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = isCallable(onFinally);\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// makes sure that native promise-based APIs `Promise#finally` properly works with patched `Promise#then`\nif (!IS_PURE && isCallable(NativePromise)) {\n  var method = getBuiltIn('Promise').prototype['finally'];\n  if (NativePromise.prototype['finally'] !== method) {\n    redefine(NativePromise.prototype, 'finally', method, { unsafe: true });\n  }\n}\n","import _slicedToArray from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _assertThisInitialized from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _get from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _classCallCheck from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { AnimationClip, Bone, Box3, BufferAttribute, BufferGeometry, ClampToEdgeWrapping, Color, DirectionalLight, DoubleSide, FileLoader, FrontSide, Group, ImageBitmapLoader, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, Line, LineBasicMaterial, LineLoop, LineSegments, LinearFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, Loader, LoaderUtils, Material, MathUtils, Matrix4, Mesh, MeshBasicMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MirroredRepeatWrapping, NearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NumberKeyframeTrack, Object3D, OrthographicCamera, PerspectiveCamera, PointLight, Points, PointsMaterial, PropertyBinding, Quaternion, QuaternionKeyframeTrack, RepeatWrapping, Skeleton, SkinnedMesh, Sphere, SpotLight, TangentSpaceNormalMap, Texture, TextureLoader, TriangleFanDrawMode, TriangleStripDrawMode, Vector2, Vector3, VectorKeyframeTrack, sRGBEncoding } from 'three';\n\nvar GLTFLoader = /*#__PURE__*/function (_Loader) {\n  _inherits(GLTFLoader, _Loader);\n\n  var _super = _createSuper(GLTFLoader);\n\n  function GLTFLoader(manager) {\n    var _this;\n\n    _classCallCheck(this, GLTFLoader);\n\n    _this = _super.call(this, manager);\n    _this.dracoLoader = null;\n    _this.ktx2Loader = null;\n    _this.meshoptDecoder = null;\n    _this.pluginCallbacks = [];\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsClearcoatExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFTextureBasisUExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFTextureWebPExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsSheenExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsTransmissionExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsVolumeExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsIorExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsSpecularExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFLightsExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMeshoptCompression(parser);\n    });\n\n    return _this;\n  }\n\n  _createClass(GLTFLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var resourcePath;\n\n      if (this.resourcePath !== '') {\n        resourcePath = this.resourcePath;\n      } else if (this.path !== '') {\n        resourcePath = this.path;\n      } else {\n        resourcePath = LoaderUtils.extractUrlBase(url);\n      } // Tells the LoadingManager to track an extra item, which resolves after\n      // the model is fully loaded. This means the count of items loaded will\n      // be incorrect, but ensures manager.onLoad() does not fire early.\n\n\n      this.manager.itemStart(url);\n\n      var _onError = function _onError(e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n\n        scope.manager.itemError(url);\n        scope.manager.itemEnd(url);\n      };\n\n      var loader = new FileLoader(this.manager);\n      loader.setPath(this.path);\n      loader.setResponseType('arraybuffer');\n      loader.setRequestHeader(this.requestHeader);\n      loader.setWithCredentials(this.withCredentials);\n      loader.load(url, function (data) {\n        try {\n          scope.parse(data, resourcePath, function (gltf) {\n            onLoad(gltf);\n            scope.manager.itemEnd(url);\n          }, _onError);\n        } catch (e) {\n          _onError(e);\n        }\n      }, onProgress, _onError);\n    }\n  }, {\n    key: \"setDRACOLoader\",\n    value: function setDRACOLoader(dracoLoader) {\n      this.dracoLoader = dracoLoader;\n      return this;\n    }\n  }, {\n    key: \"setDDSLoader\",\n    value: function setDDSLoader() {\n      throw new Error('THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".');\n    }\n  }, {\n    key: \"setKTX2Loader\",\n    value: function setKTX2Loader(ktx2Loader) {\n      this.ktx2Loader = ktx2Loader;\n      return this;\n    }\n  }, {\n    key: \"setMeshoptDecoder\",\n    value: function setMeshoptDecoder(meshoptDecoder) {\n      this.meshoptDecoder = meshoptDecoder;\n      return this;\n    }\n  }, {\n    key: \"register\",\n    value: function register(callback) {\n      if (this.pluginCallbacks.indexOf(callback) === -1) {\n        this.pluginCallbacks.push(callback);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unregister\",\n    value: function unregister(callback) {\n      if (this.pluginCallbacks.indexOf(callback) !== -1) {\n        this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(callback), 1);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(data, path, onLoad, onError) {\n      var content;\n      var extensions = {};\n      var plugins = {};\n\n      if (typeof data === 'string') {\n        content = data;\n      } else {\n        var magic = LoaderUtils.decodeText(new Uint8Array(data, 0, 4));\n\n        if (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n          try {\n            extensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\n          } catch (error) {\n            if (onError) onError(error);\n            return;\n          }\n\n          content = extensions[EXTENSIONS.KHR_BINARY_GLTF].content;\n        } else {\n          content = LoaderUtils.decodeText(new Uint8Array(data));\n        }\n      }\n\n      var json = JSON.parse(content);\n\n      if (json.asset === undefined || json.asset.version[0] < 2) {\n        if (onError) onError(new Error('THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.'));\n        return;\n      }\n\n      var parser = new GLTFParser(json, {\n        path: path || this.resourcePath || '',\n        crossOrigin: this.crossOrigin,\n        requestHeader: this.requestHeader,\n        manager: this.manager,\n        ktx2Loader: this.ktx2Loader,\n        meshoptDecoder: this.meshoptDecoder\n      });\n      parser.fileLoader.setRequestHeader(this.requestHeader);\n\n      for (var i = 0; i < this.pluginCallbacks.length; i++) {\n        var plugin = this.pluginCallbacks[i](parser);\n        plugins[plugin.name] = plugin; // Workaround to avoid determining as unknown extension\n        // in addUnknownExtensionsToUserData().\n        // Remove this workaround if we move all the existing\n        // extension handlers to plugin system\n\n        extensions[plugin.name] = true;\n      }\n\n      if (json.extensionsUsed) {\n        for (var _i = 0; _i < json.extensionsUsed.length; ++_i) {\n          var extensionName = json.extensionsUsed[_i];\n          var extensionsRequired = json.extensionsRequired || [];\n\n          switch (extensionName) {\n            case EXTENSIONS.KHR_MATERIALS_UNLIT:\n              extensions[extensionName] = new GLTFMaterialsUnlitExtension();\n              break;\n\n            case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n              extensions[extensionName] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n              break;\n\n            case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n              extensions[extensionName] = new GLTFDracoMeshCompressionExtension(json, this.dracoLoader);\n              break;\n\n            case EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n              extensions[extensionName] = new GLTFTextureTransformExtension();\n              break;\n\n            case EXTENSIONS.KHR_MESH_QUANTIZATION:\n              extensions[extensionName] = new GLTFMeshQuantizationExtension();\n              break;\n\n            default:\n              if (extensionsRequired.indexOf(extensionName) >= 0 && plugins[extensionName] === undefined) {\n                console.warn('THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".');\n              }\n\n          }\n        }\n      }\n\n      parser.setExtensions(extensions);\n      parser.setPlugins(plugins);\n      parser.parse(onLoad, onError);\n    }\n  }, {\n    key: \"parseAsync\",\n    value: function parseAsync(data, path) {\n      var scope = this;\n      return new Promise(function (resolve, reject) {\n        scope.parse(data, path, resolve, reject);\n      });\n    }\n  }]);\n\n  return GLTFLoader;\n}(Loader);\n/* GLTFREGISTRY */\n\n\nfunction GLTFRegistry() {\n  var objects = {};\n  return {\n    get: function get(key) {\n      return objects[key];\n    },\n    add: function add(key, object) {\n      objects[key] = object;\n    },\n    remove: function remove(key) {\n      delete objects[key];\n    },\n    removeAll: function removeAll() {\n      objects = {};\n    }\n  };\n}\n/*********************************/\n\n/********** EXTENSIONS ***********/\n\n/*********************************/\n\n\nvar EXTENSIONS = {\n  KHR_BINARY_GLTF: 'KHR_binary_glTF',\n  KHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n  KHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n  KHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n  KHR_MATERIALS_IOR: 'KHR_materials_ior',\n  KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n  KHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n  KHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n  KHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n  KHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n  KHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n  KHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n  KHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n  KHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n  EXT_TEXTURE_WEBP: 'EXT_texture_webp',\n  EXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n};\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\n\nvar GLTFLightsExtension = /*#__PURE__*/function () {\n  function GLTFLightsExtension(parser) {\n    _classCallCheck(this, GLTFLightsExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL; // Object3D instance caches\n\n    this.cache = {\n      refs: {},\n      uses: {}\n    };\n  }\n\n  _createClass(GLTFLightsExtension, [{\n    key: \"_markDefs\",\n    value: function _markDefs() {\n      var parser = this.parser;\n      var nodeDefs = this.parser.json.nodes || [];\n\n      for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n        var nodeDef = nodeDefs[nodeIndex];\n\n        if (nodeDef.extensions && nodeDef.extensions[this.name] && nodeDef.extensions[this.name].light !== undefined) {\n          parser._addNodeRef(this.cache, nodeDef.extensions[this.name].light);\n        }\n      }\n    }\n  }, {\n    key: \"_loadLight\",\n    value: function _loadLight(lightIndex) {\n      var parser = this.parser;\n      var cacheKey = 'light:' + lightIndex;\n      var dependency = parser.cache.get(cacheKey);\n      if (dependency) return dependency;\n      var json = parser.json;\n      var extensions = json.extensions && json.extensions[this.name] || {};\n      var lightDefs = extensions.lights || [];\n      var lightDef = lightDefs[lightIndex];\n      var lightNode;\n      var color = new Color(0xffffff);\n      if (lightDef.color !== undefined) color.fromArray(lightDef.color);\n      var range = lightDef.range !== undefined ? lightDef.range : 0;\n\n      switch (lightDef.type) {\n        case 'directional':\n          lightNode = new DirectionalLight(color);\n          lightNode.target.position.set(0, 0, -1);\n          lightNode.add(lightNode.target);\n          break;\n\n        case 'point':\n          lightNode = new PointLight(color);\n          lightNode.distance = range;\n          break;\n\n        case 'spot':\n          lightNode = new SpotLight(color);\n          lightNode.distance = range; // Handle spotlight properties.\n\n          lightDef.spot = lightDef.spot || {};\n          lightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n          lightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n          lightNode.angle = lightDef.spot.outerConeAngle;\n          lightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n          lightNode.target.position.set(0, 0, -1);\n          lightNode.add(lightNode.target);\n          break;\n\n        default:\n          throw new Error('THREE.GLTFLoader: Unexpected light type: ' + lightDef.type);\n      } // Some lights (e.g. spot) default to a position other than the origin. Reset the position\n      // here, because node-level parsing will only override position if explicitly specified.\n\n\n      lightNode.position.set(0, 0, 0);\n      lightNode.decay = 2;\n      if (lightDef.intensity !== undefined) lightNode.intensity = lightDef.intensity;\n      lightNode.name = parser.createUniqueName(lightDef.name || 'light_' + lightIndex);\n      dependency = Promise.resolve(lightNode);\n      parser.cache.add(cacheKey, dependency);\n      return dependency;\n    }\n  }, {\n    key: \"createNodeAttachment\",\n    value: function createNodeAttachment(nodeIndex) {\n      var self = this;\n      var parser = this.parser;\n      var json = parser.json;\n      var nodeDef = json.nodes[nodeIndex];\n      var lightDef = nodeDef.extensions && nodeDef.extensions[this.name] || {};\n      var lightIndex = lightDef.light;\n      if (lightIndex === undefined) return null;\n      return this._loadLight(lightIndex).then(function (light) {\n        return parser._getNodeRef(self.cache, lightIndex, light);\n      });\n    }\n  }]);\n\n  return GLTFLightsExtension;\n}();\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\n\n\nvar GLTFMaterialsUnlitExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsUnlitExtension() {\n    _classCallCheck(this, GLTFMaterialsUnlitExtension);\n\n    this.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n  }\n\n  _createClass(GLTFMaterialsUnlitExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType() {\n      return MeshBasicMaterial;\n    }\n  }, {\n    key: \"extendParams\",\n    value: function extendParams(materialParams, materialDef, parser) {\n      var pending = [];\n      materialParams.color = new Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n      var metallicRoughness = materialDef.pbrMetallicRoughness;\n\n      if (metallicRoughness) {\n        if (Array.isArray(metallicRoughness.baseColorFactor)) {\n          var array = metallicRoughness.baseColorFactor;\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n        }\n\n        if (metallicRoughness.baseColorTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n        }\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsUnlitExtension;\n}();\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\n\n\nvar GLTFMaterialsClearcoatExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsClearcoatExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsClearcoatExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n  }\n\n  _createClass(GLTFMaterialsClearcoatExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n\n      if (extension.clearcoatFactor !== undefined) {\n        materialParams.clearcoat = extension.clearcoatFactor;\n      }\n\n      if (extension.clearcoatTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatMap', extension.clearcoatTexture));\n      }\n\n      if (extension.clearcoatRoughnessFactor !== undefined) {\n        materialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n      }\n\n      if (extension.clearcoatRoughnessTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture));\n      }\n\n      if (extension.clearcoatNormalTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture));\n\n        if (extension.clearcoatNormalTexture.scale !== undefined) {\n          var scale = extension.clearcoatNormalTexture.scale;\n          materialParams.clearcoatNormalScale = new Vector2(scale, scale);\n        }\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsClearcoatExtension;\n}();\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\n\n\nvar GLTFMaterialsSheenExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsSheenExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsSheenExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n  }\n\n  _createClass(GLTFMaterialsSheenExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      materialParams.sheenColor = new Color(0, 0, 0);\n      materialParams.sheenRoughness = 0;\n      materialParams.sheen = 1;\n      var extension = materialDef.extensions[this.name];\n\n      if (extension.sheenColorFactor !== undefined) {\n        materialParams.sheenColor.fromArray(extension.sheenColorFactor);\n      }\n\n      if (extension.sheenRoughnessFactor !== undefined) {\n        materialParams.sheenRoughness = extension.sheenRoughnessFactor;\n      }\n\n      if (extension.sheenColorTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'sheenColorMap', extension.sheenColorTexture));\n      }\n\n      if (extension.sheenRoughnessTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture));\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsSheenExtension;\n}();\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\n\n\nvar GLTFMaterialsTransmissionExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsTransmissionExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsTransmissionExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n  }\n\n  _createClass(GLTFMaterialsTransmissionExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n\n      if (extension.transmissionFactor !== undefined) {\n        materialParams.transmission = extension.transmissionFactor;\n      }\n\n      if (extension.transmissionTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'transmissionMap', extension.transmissionTexture));\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsTransmissionExtension;\n}();\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\n\n\nvar GLTFMaterialsVolumeExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsVolumeExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsVolumeExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n  }\n\n  _createClass(GLTFMaterialsVolumeExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n      materialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n      if (extension.thicknessTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'thicknessMap', extension.thicknessTexture));\n      }\n\n      materialParams.attenuationDistance = extension.attenuationDistance || 0;\n      var colorArray = extension.attenuationColor || [1, 1, 1];\n      materialParams.attenuationColor = new Color(colorArray[0], colorArray[1], colorArray[2]);\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsVolumeExtension;\n}();\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\n\n\nvar GLTFMaterialsIorExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsIorExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsIorExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_IOR;\n  }\n\n  _createClass(GLTFMaterialsIorExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var extension = materialDef.extensions[this.name];\n      materialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n      return Promise.resolve();\n    }\n  }]);\n\n  return GLTFMaterialsIorExtension;\n}();\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\n\n\nvar GLTFMaterialsSpecularExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsSpecularExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsSpecularExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n  }\n\n  _createClass(GLTFMaterialsSpecularExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n      materialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n      if (extension.specularTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'specularIntensityMap', extension.specularTexture));\n      }\n\n      var colorArray = extension.specularColorFactor || [1, 1, 1];\n      materialParams.specularColor = new Color(colorArray[0], colorArray[1], colorArray[2]);\n\n      if (extension.specularColorTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'specularColorMap', extension.specularColorTexture).then(function (texture) {\n          texture.encoding = sRGBEncoding;\n        }));\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsSpecularExtension;\n}();\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\n\n\nvar GLTFTextureBasisUExtension = /*#__PURE__*/function () {\n  function GLTFTextureBasisUExtension(parser) {\n    _classCallCheck(this, GLTFTextureBasisUExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n  }\n\n  _createClass(GLTFTextureBasisUExtension, [{\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var parser = this.parser;\n      var json = parser.json;\n      var textureDef = json.textures[textureIndex];\n\n      if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n        return null;\n      }\n\n      var extension = textureDef.extensions[this.name];\n      var source = json.images[extension.source];\n      var loader = parser.options.ktx2Loader;\n\n      if (!loader) {\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n          throw new Error('THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures');\n        } else {\n          // Assumes that the extension is optional and that a fallback texture is present\n          return null;\n        }\n      }\n\n      return parser.loadTextureImage(textureIndex, source, loader);\n    }\n  }]);\n\n  return GLTFTextureBasisUExtension;\n}();\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\n\n\nvar GLTFTextureWebPExtension = /*#__PURE__*/function () {\n  function GLTFTextureWebPExtension(parser) {\n    _classCallCheck(this, GLTFTextureWebPExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n    this.isSupported = null;\n  }\n\n  _createClass(GLTFTextureWebPExtension, [{\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var name = this.name;\n      var parser = this.parser;\n      var json = parser.json;\n      var textureDef = json.textures[textureIndex];\n\n      if (!textureDef.extensions || !textureDef.extensions[name]) {\n        return null;\n      }\n\n      var extension = textureDef.extensions[name];\n      var source = json.images[extension.source];\n      var loader = parser.textureLoader;\n\n      if (source.uri) {\n        var handler = parser.options.manager.getHandler(source.uri);\n        if (handler !== null) loader = handler;\n      }\n\n      return this.detectSupport().then(function (isSupported) {\n        if (isSupported) return parser.loadTextureImage(textureIndex, source, loader);\n\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(name) >= 0) {\n          throw new Error('THREE.GLTFLoader: WebP required by asset but unsupported.');\n        } // Fall back to PNG or JPEG.\n\n\n        return parser.loadTexture(textureIndex);\n      });\n    }\n  }, {\n    key: \"detectSupport\",\n    value: function detectSupport() {\n      if (!this.isSupported) {\n        this.isSupported = new Promise(function (resolve) {\n          var image = new Image(); // Lossy test image. Support for lossy images doesn't guarantee support for all\n          // WebP images, unfortunately.\n\n          image.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n          image.onload = image.onerror = function () {\n            resolve(image.height === 1);\n          };\n        });\n      }\n\n      return this.isSupported;\n    }\n  }]);\n\n  return GLTFTextureWebPExtension;\n}();\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\n\n\nvar GLTFMeshoptCompression = /*#__PURE__*/function () {\n  function GLTFMeshoptCompression(parser) {\n    _classCallCheck(this, GLTFMeshoptCompression);\n\n    this.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n    this.parser = parser;\n  }\n\n  _createClass(GLTFMeshoptCompression, [{\n    key: \"loadBufferView\",\n    value: function loadBufferView(index) {\n      var json = this.parser.json;\n      var bufferView = json.bufferViews[index];\n\n      if (bufferView.extensions && bufferView.extensions[this.name]) {\n        var extensionDef = bufferView.extensions[this.name];\n        var buffer = this.parser.getDependency('buffer', extensionDef.buffer);\n        var decoder = this.parser.options.meshoptDecoder;\n\n        if (!decoder || !decoder.supported) {\n          if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n            throw new Error('THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files');\n          } else {\n            // Assumes that the extension is optional and that fallback buffer data is present\n            return null;\n          }\n        }\n\n        return Promise.all([buffer, decoder.ready]).then(function (res) {\n          var byteOffset = extensionDef.byteOffset || 0;\n          var byteLength = extensionDef.byteLength || 0;\n          var count = extensionDef.count;\n          var stride = extensionDef.byteStride;\n          var result = new ArrayBuffer(count * stride);\n          var source = new Uint8Array(res[0], byteOffset, byteLength);\n          decoder.decodeGltfBuffer(new Uint8Array(result), count, stride, source, extensionDef.mode, extensionDef.filter);\n          return result;\n        });\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return GLTFMeshoptCompression;\n}();\n/* BINARY EXTENSION */\n\n\nvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nvar BINARY_EXTENSION_HEADER_LENGTH = 12;\nvar BINARY_EXTENSION_CHUNK_TYPES = {\n  JSON: 0x4E4F534A,\n  BIN: 0x004E4942\n};\n\nvar GLTFBinaryExtension = /*#__PURE__*/_createClass(function GLTFBinaryExtension(data) {\n  _classCallCheck(this, GLTFBinaryExtension);\n\n  this.name = EXTENSIONS.KHR_BINARY_GLTF;\n  this.content = null;\n  this.body = null;\n  var headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\n  this.header = {\n    magic: LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4))),\n    version: headerView.getUint32(4, true),\n    length: headerView.getUint32(8, true)\n  };\n\n  if (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n    throw new Error('THREE.GLTFLoader: Unsupported glTF-Binary header.');\n  } else if (this.header.version < 2.0) {\n    throw new Error('THREE.GLTFLoader: Legacy binary file detected.');\n  }\n\n  var chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n  var chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\n  var chunkIndex = 0;\n\n  while (chunkIndex < chunkContentsLength) {\n    var chunkLength = chunkView.getUint32(chunkIndex, true);\n    chunkIndex += 4;\n    var chunkType = chunkView.getUint32(chunkIndex, true);\n    chunkIndex += 4;\n\n    if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n      var contentArray = new Uint8Array(data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength);\n      this.content = LoaderUtils.decodeText(contentArray);\n    } else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n      var byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n      this.body = data.slice(byteOffset, byteOffset + chunkLength);\n    } // Clients must ignore chunks with unknown types.\n\n\n    chunkIndex += chunkLength;\n  }\n\n  if (this.content === null) {\n    throw new Error('THREE.GLTFLoader: JSON content not found.');\n  }\n});\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\n\n\nvar GLTFDracoMeshCompressionExtension = /*#__PURE__*/function () {\n  function GLTFDracoMeshCompressionExtension(json, dracoLoader) {\n    _classCallCheck(this, GLTFDracoMeshCompressionExtension);\n\n    if (!dracoLoader) {\n      throw new Error('THREE.GLTFLoader: No DRACOLoader instance provided.');\n    }\n\n    this.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n    this.json = json;\n    this.dracoLoader = dracoLoader;\n    this.dracoLoader.preload();\n  }\n\n  _createClass(GLTFDracoMeshCompressionExtension, [{\n    key: \"decodePrimitive\",\n    value: function decodePrimitive(primitive, parser) {\n      var json = this.json;\n      var dracoLoader = this.dracoLoader;\n      var bufferViewIndex = primitive.extensions[this.name].bufferView;\n      var gltfAttributeMap = primitive.extensions[this.name].attributes;\n      var threeAttributeMap = {};\n      var attributeNormalizedMap = {};\n      var attributeTypeMap = {};\n\n      for (var attributeName in gltfAttributeMap) {\n        var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n        threeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName];\n      }\n\n      for (var _attributeName in primitive.attributes) {\n        var _threeAttributeName = ATTRIBUTES[_attributeName] || _attributeName.toLowerCase();\n\n        if (gltfAttributeMap[_attributeName] !== undefined) {\n          var accessorDef = json.accessors[primitive.attributes[_attributeName]];\n          var componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n          attributeTypeMap[_threeAttributeName] = componentType;\n          attributeNormalizedMap[_threeAttributeName] = accessorDef.normalized === true;\n        }\n      }\n\n      return parser.getDependency('bufferView', bufferViewIndex).then(function (bufferView) {\n        return new Promise(function (resolve) {\n          dracoLoader.decodeDracoFile(bufferView, function (geometry) {\n            for (var _attributeName2 in geometry.attributes) {\n              var attribute = geometry.attributes[_attributeName2];\n              var normalized = attributeNormalizedMap[_attributeName2];\n              if (normalized !== undefined) attribute.normalized = normalized;\n            }\n\n            resolve(geometry);\n          }, threeAttributeMap, attributeTypeMap);\n        });\n      });\n    }\n  }]);\n\n  return GLTFDracoMeshCompressionExtension;\n}();\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\n\n\nvar GLTFTextureTransformExtension = /*#__PURE__*/function () {\n  function GLTFTextureTransformExtension() {\n    _classCallCheck(this, GLTFTextureTransformExtension);\n\n    this.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n  }\n\n  _createClass(GLTFTextureTransformExtension, [{\n    key: \"extendTexture\",\n    value: function extendTexture(texture, transform) {\n      if (transform.texCoord !== undefined) {\n        console.warn('THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.');\n      }\n\n      if (transform.offset === undefined && transform.rotation === undefined && transform.scale === undefined) {\n        // See https://github.com/mrdoob/three.js/issues/21819.\n        return texture;\n      }\n\n      texture = texture.clone();\n\n      if (transform.offset !== undefined) {\n        texture.offset.fromArray(transform.offset);\n      }\n\n      if (transform.rotation !== undefined) {\n        texture.rotation = transform.rotation;\n      }\n\n      if (transform.scale !== undefined) {\n        texture.repeat.fromArray(transform.scale);\n      }\n\n      texture.needsUpdate = true;\n      return texture;\n    }\n  }]);\n\n  return GLTFTextureTransformExtension;\n}();\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Archived/KHR_materials_pbrSpecularGlossiness\n */\n\n/**\n * A sub class of StandardMaterial with some of the functionality\n * changed via the `onBeforeCompile` callback\n * @pailhead\n */\n\n\nvar GLTFMeshStandardSGMaterial = /*#__PURE__*/function (_MeshStandardMaterial) {\n  _inherits(GLTFMeshStandardSGMaterial, _MeshStandardMaterial);\n\n  var _super2 = _createSuper(GLTFMeshStandardSGMaterial);\n\n  function GLTFMeshStandardSGMaterial(params) {\n    var _this2;\n\n    _classCallCheck(this, GLTFMeshStandardSGMaterial);\n\n    _this2 = _super2.call(this);\n    _this2.isGLTFSpecularGlossinessMaterial = true; //various chunks that need replacing\n\n    var specularMapParsFragmentChunk = ['#ifdef USE_SPECULARMAP', '\tuniform sampler2D specularMap;', '#endif'].join('\\n');\n    var glossinessMapParsFragmentChunk = ['#ifdef USE_GLOSSINESSMAP', '\tuniform sampler2D glossinessMap;', '#endif'].join('\\n');\n    var specularMapFragmentChunk = ['vec3 specularFactor = specular;', '#ifdef USE_SPECULARMAP', '\tvec4 texelSpecular = texture2D( specularMap, vUv );', '\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture', '\tspecularFactor *= texelSpecular.rgb;', '#endif'].join('\\n');\n    var glossinessMapFragmentChunk = ['float glossinessFactor = glossiness;', '#ifdef USE_GLOSSINESSMAP', '\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );', '\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture', '\tglossinessFactor *= texelGlossiness.a;', '#endif'].join('\\n');\n    var lightPhysicalFragmentChunk = ['PhysicalMaterial material;', 'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );', 'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );', 'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );', 'material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.', 'material.roughness += geometryRoughness;', 'material.roughness = min( material.roughness, 1.0 );', 'material.specularColor = specularFactor;'].join('\\n');\n    var uniforms = {\n      specular: {\n        value: new Color().setHex(0xffffff)\n      },\n      glossiness: {\n        value: 1\n      },\n      specularMap: {\n        value: null\n      },\n      glossinessMap: {\n        value: null\n      }\n    };\n    _this2._extraUniforms = uniforms;\n\n    _this2.onBeforeCompile = function (shader) {\n      for (var uniformName in uniforms) {\n        shader.uniforms[uniformName] = uniforms[uniformName];\n      }\n\n      shader.fragmentShader = shader.fragmentShader.replace('uniform float roughness;', 'uniform vec3 specular;').replace('uniform float metalness;', 'uniform float glossiness;').replace('#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk).replace('#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk).replace('#include <roughnessmap_fragment>', specularMapFragmentChunk).replace('#include <metalnessmap_fragment>', glossinessMapFragmentChunk).replace('#include <lights_physical_fragment>', lightPhysicalFragmentChunk);\n    };\n\n    Object.defineProperties(_assertThisInitialized(_this2), {\n      specular: {\n        get: function get() {\n          return uniforms.specular.value;\n        },\n        set: function set(v) {\n          uniforms.specular.value = v;\n        }\n      },\n      specularMap: {\n        get: function get() {\n          return uniforms.specularMap.value;\n        },\n        set: function set(v) {\n          uniforms.specularMap.value = v;\n\n          if (v) {\n            this.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n          } else {\n            delete this.defines.USE_SPECULARMAP;\n          }\n        }\n      },\n      glossiness: {\n        get: function get() {\n          return uniforms.glossiness.value;\n        },\n        set: function set(v) {\n          uniforms.glossiness.value = v;\n        }\n      },\n      glossinessMap: {\n        get: function get() {\n          return uniforms.glossinessMap.value;\n        },\n        set: function set(v) {\n          uniforms.glossinessMap.value = v;\n\n          if (v) {\n            this.defines.USE_GLOSSINESSMAP = '';\n            this.defines.USE_UV = '';\n          } else {\n            delete this.defines.USE_GLOSSINESSMAP;\n            delete this.defines.USE_UV;\n          }\n        }\n      }\n    });\n    delete _this2.metalness;\n    delete _this2.roughness;\n    delete _this2.metalnessMap;\n    delete _this2.roughnessMap;\n\n    _this2.setValues(params);\n\n    return _this2;\n  }\n\n  _createClass(GLTFMeshStandardSGMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(GLTFMeshStandardSGMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.specularMap = source.specularMap;\n      this.specular.copy(source.specular);\n      this.glossinessMap = source.glossinessMap;\n      this.glossiness = source.glossiness;\n      delete this.metalness;\n      delete this.roughness;\n      delete this.metalnessMap;\n      delete this.roughnessMap;\n      return this;\n    }\n  }]);\n\n  return GLTFMeshStandardSGMaterial;\n}(MeshStandardMaterial);\n\nvar GLTFMaterialsPbrSpecularGlossinessExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsPbrSpecularGlossinessExtension() {\n    _classCallCheck(this, GLTFMaterialsPbrSpecularGlossinessExtension);\n\n    this.name = EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n    this.specularGlossinessParams = ['color', 'map', 'lightMap', 'lightMapIntensity', 'aoMap', 'aoMapIntensity', 'emissive', 'emissiveIntensity', 'emissiveMap', 'bumpMap', 'bumpScale', 'normalMap', 'normalMapType', 'displacementMap', 'displacementScale', 'displacementBias', 'specularMap', 'specular', 'glossinessMap', 'glossiness', 'alphaMap', 'envMap', 'envMapIntensity', 'refractionRatio'];\n  }\n\n  _createClass(GLTFMaterialsPbrSpecularGlossinessExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType() {\n      return GLTFMeshStandardSGMaterial;\n    }\n  }, {\n    key: \"extendParams\",\n    value: function extendParams(materialParams, materialDef, parser) {\n      var pbrSpecularGlossiness = materialDef.extensions[this.name];\n      materialParams.color = new Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n      var pending = [];\n\n      if (Array.isArray(pbrSpecularGlossiness.diffuseFactor)) {\n        var array = pbrSpecularGlossiness.diffuseFactor;\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n      }\n\n      if (pbrSpecularGlossiness.diffuseTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'map', pbrSpecularGlossiness.diffuseTexture));\n      }\n\n      materialParams.emissive = new Color(0.0, 0.0, 0.0);\n      materialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n      materialParams.specular = new Color(1.0, 1.0, 1.0);\n\n      if (Array.isArray(pbrSpecularGlossiness.specularFactor)) {\n        materialParams.specular.fromArray(pbrSpecularGlossiness.specularFactor);\n      }\n\n      if (pbrSpecularGlossiness.specularGlossinessTexture !== undefined) {\n        var specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n        pending.push(parser.assignTexture(materialParams, 'glossinessMap', specGlossMapDef));\n        pending.push(parser.assignTexture(materialParams, 'specularMap', specGlossMapDef));\n      }\n\n      return Promise.all(pending);\n    }\n  }, {\n    key: \"createMaterial\",\n    value: function createMaterial(materialParams) {\n      var material = new GLTFMeshStandardSGMaterial(materialParams);\n      material.fog = true;\n      material.color = materialParams.color;\n      material.map = materialParams.map === undefined ? null : materialParams.map;\n      material.lightMap = null;\n      material.lightMapIntensity = 1.0;\n      material.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n      material.aoMapIntensity = 1.0;\n      material.emissive = materialParams.emissive;\n      material.emissiveIntensity = 1.0;\n      material.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n      material.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n      material.bumpScale = 1;\n      material.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n      material.normalMapType = TangentSpaceNormalMap;\n      if (materialParams.normalScale) material.normalScale = materialParams.normalScale;\n      material.displacementMap = null;\n      material.displacementScale = 1;\n      material.displacementBias = 0;\n      material.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n      material.specular = materialParams.specular;\n      material.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n      material.glossiness = materialParams.glossiness;\n      material.alphaMap = null;\n      material.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n      material.envMapIntensity = 1.0;\n      material.refractionRatio = 0.98;\n      return material;\n    }\n  }]);\n\n  return GLTFMaterialsPbrSpecularGlossinessExtension;\n}();\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\n\n\nvar GLTFMeshQuantizationExtension = /*#__PURE__*/_createClass(function GLTFMeshQuantizationExtension() {\n  _classCallCheck(this, GLTFMeshQuantizationExtension);\n\n  this.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n});\n/*********************************/\n\n/********** INTERPOLATION ********/\n\n/*********************************/\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\n\nvar GLTFCubicSplineInterpolant = /*#__PURE__*/function (_Interpolant) {\n  _inherits(GLTFCubicSplineInterpolant, _Interpolant);\n\n  var _super3 = _createSuper(GLTFCubicSplineInterpolant);\n\n  function GLTFCubicSplineInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    _classCallCheck(this, GLTFCubicSplineInterpolant);\n\n    return _super3.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n  }\n\n  _createClass(GLTFCubicSplineInterpolant, [{\n    key: \"copySampleValue_\",\n    value: function copySampleValue_(index) {\n      // Copies a sample value to the result buffer. See description of glTF\n      // CUBICSPLINE values layout in interpolate_() function below.\n      var result = this.resultBuffer,\n          values = this.sampleValues,\n          valueSize = this.valueSize,\n          offset = index * valueSize * 3 + valueSize;\n\n      for (var i = 0; i !== valueSize; i++) {\n        result[i] = values[offset + i];\n      }\n\n      return result;\n    }\n  }]);\n\n  return GLTFCubicSplineInterpolant;\n}(Interpolant);\n\nGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\nGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.interpolate_ = function (i1, t0, t, t1) {\n  var result = this.resultBuffer;\n  var values = this.sampleValues;\n  var stride = this.valueSize;\n  var stride2 = stride * 2;\n  var stride3 = stride * 3;\n  var td = t1 - t0;\n  var p = (t - t0) / td;\n  var pp = p * p;\n  var ppp = pp * p;\n  var offset1 = i1 * stride3;\n  var offset0 = offset1 - stride3;\n  var s2 = -2 * ppp + 3 * pp;\n  var s3 = ppp - pp;\n  var s0 = 1 - s2;\n  var s1 = s3 - pp + p; // Layout of keyframe output values for CUBICSPLINE animations:\n  //   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\n  for (var i = 0; i !== stride; i++) {\n    var p0 = values[offset0 + i + stride]; // splineVertex_k\n\n    var m0 = values[offset0 + i + stride2] * td; // outTangent_k * (t_k+1 - t_k)\n\n    var p1 = values[offset1 + i + stride]; // splineVertex_k+1\n\n    var m1 = values[offset1 + i] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n    result[i] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n  }\n\n  return result;\n};\n\nvar _q = new Quaternion();\n\nvar GLTFCubicSplineQuaternionInterpolant = /*#__PURE__*/function (_GLTFCubicSplineInter) {\n  _inherits(GLTFCubicSplineQuaternionInterpolant, _GLTFCubicSplineInter);\n\n  var _super4 = _createSuper(GLTFCubicSplineQuaternionInterpolant);\n\n  function GLTFCubicSplineQuaternionInterpolant() {\n    _classCallCheck(this, GLTFCubicSplineQuaternionInterpolant);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(GLTFCubicSplineQuaternionInterpolant, [{\n    key: \"interpolate_\",\n    value: function interpolate_(i1, t0, t, t1) {\n      var result = _get(_getPrototypeOf(GLTFCubicSplineQuaternionInterpolant.prototype), \"interpolate_\", this).call(this, i1, t0, t, t1);\n\n      _q.fromArray(result).normalize().toArray(result);\n\n      return result;\n    }\n  }]);\n\n  return GLTFCubicSplineQuaternionInterpolant;\n}(GLTFCubicSplineInterpolant);\n/*********************************/\n\n/********** INTERNALS ************/\n\n/*********************************/\n\n/* CONSTANTS */\n\n\nvar WEBGL_CONSTANTS = {\n  FLOAT: 5126,\n  //FLOAT_MAT2: 35674,\n  FLOAT_MAT3: 35675,\n  FLOAT_MAT4: 35676,\n  FLOAT_VEC2: 35664,\n  FLOAT_VEC3: 35665,\n  FLOAT_VEC4: 35666,\n  LINEAR: 9729,\n  REPEAT: 10497,\n  SAMPLER_2D: 35678,\n  POINTS: 0,\n  LINES: 1,\n  LINE_LOOP: 2,\n  LINE_STRIP: 3,\n  TRIANGLES: 4,\n  TRIANGLE_STRIP: 5,\n  TRIANGLE_FAN: 6,\n  UNSIGNED_BYTE: 5121,\n  UNSIGNED_SHORT: 5123\n};\nvar WEBGL_COMPONENT_TYPES = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nvar WEBGL_FILTERS = {\n  9728: NearestFilter,\n  9729: LinearFilter,\n  9984: NearestMipmapNearestFilter,\n  9985: LinearMipmapNearestFilter,\n  9986: NearestMipmapLinearFilter,\n  9987: LinearMipmapLinearFilter\n};\nvar WEBGL_WRAPPINGS = {\n  33071: ClampToEdgeWrapping,\n  33648: MirroredRepeatWrapping,\n  10497: RepeatWrapping\n};\nvar WEBGL_TYPE_SIZES = {\n  'SCALAR': 1,\n  'VEC2': 2,\n  'VEC3': 3,\n  'VEC4': 4,\n  'MAT2': 4,\n  'MAT3': 9,\n  'MAT4': 16\n};\nvar ATTRIBUTES = {\n  POSITION: 'position',\n  NORMAL: 'normal',\n  TANGENT: 'tangent',\n  TEXCOORD_0: 'uv',\n  TEXCOORD_1: 'uv2',\n  COLOR_0: 'color',\n  WEIGHTS_0: 'skinWeight',\n  JOINTS_0: 'skinIndex'\n};\nvar PATH_PROPERTIES = {\n  scale: 'scale',\n  translation: 'position',\n  rotation: 'quaternion',\n  weights: 'morphTargetInfluences'\n};\nvar INTERPOLATION = {\n  CUBICSPLINE: undefined,\n  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n  // keyframe track will be initialized with a default interpolation type, then modified.\n  LINEAR: InterpolateLinear,\n  STEP: InterpolateDiscrete\n};\nvar ALPHA_MODES = {\n  OPAQUE: 'OPAQUE',\n  MASK: 'MASK',\n  BLEND: 'BLEND'\n};\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\n\nfunction createDefaultMaterial(cache) {\n  if (cache['DefaultMaterial'] === undefined) {\n    cache['DefaultMaterial'] = new MeshStandardMaterial({\n      color: 0xFFFFFF,\n      emissive: 0x000000,\n      metalness: 1,\n      roughness: 1,\n      transparent: false,\n      depthTest: true,\n      side: FrontSide\n    });\n  }\n\n  return cache['DefaultMaterial'];\n}\n\nfunction addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\n  // Add unknown glTF extensions to an object's userData.\n  for (var name in objectDef.extensions) {\n    if (knownExtensions[name] === undefined) {\n      object.userData.gltfExtensions = object.userData.gltfExtensions || {};\n      object.userData.gltfExtensions[name] = objectDef.extensions[name];\n    }\n  }\n}\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\n\n\nfunction assignExtrasToUserData(object, gltfDef) {\n  if (gltfDef.extras !== undefined) {\n    if (typeof gltfDef.extras === 'object') {\n      Object.assign(object.userData, gltfDef.extras);\n    } else {\n      console.warn('THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras);\n    }\n  }\n}\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\n\n\nfunction addMorphTargets(geometry, targets, parser) {\n  var hasMorphPosition = false;\n  var hasMorphNormal = false;\n\n  for (var i = 0, il = targets.length; i < il; i++) {\n    var target = targets[i];\n    if (target.POSITION !== undefined) hasMorphPosition = true;\n    if (target.NORMAL !== undefined) hasMorphNormal = true;\n    if (hasMorphPosition && hasMorphNormal) break;\n  }\n\n  if (!hasMorphPosition && !hasMorphNormal) return Promise.resolve(geometry);\n  var pendingPositionAccessors = [];\n  var pendingNormalAccessors = [];\n\n  for (var _i2 = 0, _il = targets.length; _i2 < _il; _i2++) {\n    var _target = targets[_i2];\n\n    if (hasMorphPosition) {\n      var pendingAccessor = _target.POSITION !== undefined ? parser.getDependency('accessor', _target.POSITION) : geometry.attributes.position;\n      pendingPositionAccessors.push(pendingAccessor);\n    }\n\n    if (hasMorphNormal) {\n      var _pendingAccessor = _target.NORMAL !== undefined ? parser.getDependency('accessor', _target.NORMAL) : geometry.attributes.normal;\n\n      pendingNormalAccessors.push(_pendingAccessor);\n    }\n  }\n\n  return Promise.all([Promise.all(pendingPositionAccessors), Promise.all(pendingNormalAccessors)]).then(function (accessors) {\n    var morphPositions = accessors[0];\n    var morphNormals = accessors[1];\n    if (hasMorphPosition) geometry.morphAttributes.position = morphPositions;\n    if (hasMorphNormal) geometry.morphAttributes.normal = morphNormals;\n    geometry.morphTargetsRelative = true;\n    return geometry;\n  });\n}\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\n\n\nfunction updateMorphTargets(mesh, meshDef) {\n  mesh.updateMorphTargets();\n\n  if (meshDef.weights !== undefined) {\n    for (var i = 0, il = meshDef.weights.length; i < il; i++) {\n      mesh.morphTargetInfluences[i] = meshDef.weights[i];\n    }\n  } // .extras has user-defined data, so check that .extras.targetNames is an array.\n\n\n  if (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\n    var targetNames = meshDef.extras.targetNames;\n\n    if (mesh.morphTargetInfluences.length === targetNames.length) {\n      mesh.morphTargetDictionary = {};\n\n      for (var _i3 = 0, _il2 = targetNames.length; _i3 < _il2; _i3++) {\n        mesh.morphTargetDictionary[targetNames[_i3]] = _i3;\n      }\n    } else {\n      console.warn('THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.');\n    }\n  }\n}\n\nfunction createPrimitiveKey(primitiveDef) {\n  var dracoExtension = primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];\n  var geometryKey;\n\n  if (dracoExtension) {\n    geometryKey = 'draco:' + dracoExtension.bufferView + ':' + dracoExtension.indices + ':' + createAttributesKey(dracoExtension.attributes);\n  } else {\n    geometryKey = primitiveDef.indices + ':' + createAttributesKey(primitiveDef.attributes) + ':' + primitiveDef.mode;\n  }\n\n  return geometryKey;\n}\n\nfunction createAttributesKey(attributes) {\n  var attributesKey = '';\n  var keys = Object.keys(attributes).sort();\n\n  for (var i = 0, il = keys.length; i < il; i++) {\n    attributesKey += keys[i] + ':' + attributes[keys[i]] + ';';\n  }\n\n  return attributesKey;\n}\n\nfunction getNormalizedComponentScale(constructor) {\n  // Reference:\n  // https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n  switch (constructor) {\n    case Int8Array:\n      return 1 / 127;\n\n    case Uint8Array:\n      return 1 / 255;\n\n    case Int16Array:\n      return 1 / 32767;\n\n    case Uint16Array:\n      return 1 / 65535;\n\n    default:\n      throw new Error('THREE.GLTFLoader: Unsupported normalized accessor component type.');\n  }\n}\n/* GLTF PARSER */\n\n\nvar GLTFParser = /*#__PURE__*/function () {\n  function GLTFParser() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, GLTFParser);\n\n    this.json = json;\n    this.extensions = {};\n    this.plugins = {};\n    this.options = options; // loader object cache\n\n    this.cache = new GLTFRegistry(); // associations between Three.js objects and glTF elements\n\n    this.associations = new Map(); // BufferGeometry caching\n\n    this.primitiveCache = {}; // Object3D instance caches\n\n    this.meshCache = {\n      refs: {},\n      uses: {}\n    };\n    this.cameraCache = {\n      refs: {},\n      uses: {}\n    };\n    this.lightCache = {\n      refs: {},\n      uses: {}\n    };\n    this.textureCache = {}; // Track node names, to ensure no duplicates\n\n    this.nodeNamesUsed = {}; // Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n    // expensive work of uploading a texture to the GPU off the main thread.\n\n    if (typeof createImageBitmap !== 'undefined' && /Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent) === false) {\n      this.textureLoader = new ImageBitmapLoader(this.options.manager);\n    } else {\n      this.textureLoader = new TextureLoader(this.options.manager);\n    }\n\n    this.textureLoader.setCrossOrigin(this.options.crossOrigin);\n    this.textureLoader.setRequestHeader(this.options.requestHeader);\n    this.fileLoader = new FileLoader(this.options.manager);\n    this.fileLoader.setResponseType('arraybuffer');\n\n    if (this.options.crossOrigin === 'use-credentials') {\n      this.fileLoader.setWithCredentials(true);\n    }\n  }\n\n  _createClass(GLTFParser, [{\n    key: \"setExtensions\",\n    value: function setExtensions(extensions) {\n      this.extensions = extensions;\n    }\n  }, {\n    key: \"setPlugins\",\n    value: function setPlugins(plugins) {\n      this.plugins = plugins;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(onLoad, onError) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions; // Clear the loader cache\n\n      this.cache.removeAll(); // Mark the special nodes/meshes in json for efficient parse\n\n      this._invokeAll(function (ext) {\n        return ext._markDefs && ext._markDefs();\n      });\n\n      Promise.all(this._invokeAll(function (ext) {\n        return ext.beforeRoot && ext.beforeRoot();\n      })).then(function () {\n        return Promise.all([parser.getDependencies('scene'), parser.getDependencies('animation'), parser.getDependencies('camera')]);\n      }).then(function (dependencies) {\n        var result = {\n          scene: dependencies[0][json.scene || 0],\n          scenes: dependencies[0],\n          animations: dependencies[1],\n          cameras: dependencies[2],\n          asset: json.asset,\n          parser: parser,\n          userData: {}\n        };\n        addUnknownExtensionsToUserData(extensions, result, json);\n        assignExtrasToUserData(result, json);\n        Promise.all(parser._invokeAll(function (ext) {\n          return ext.afterRoot && ext.afterRoot(result);\n        })).then(function () {\n          onLoad(result);\n        });\n      }).catch(onError);\n    }\n    /**\n     * Marks the special nodes/meshes in json for efficient parse.\n     */\n\n  }, {\n    key: \"_markDefs\",\n    value: function _markDefs() {\n      var nodeDefs = this.json.nodes || [];\n      var skinDefs = this.json.skins || [];\n      var meshDefs = this.json.meshes || []; // Nothing in the node definition indicates whether it is a Bone or an\n      // Object3D. Use the skins' joint references to mark bones.\n\n      for (var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n        var joints = skinDefs[skinIndex].joints;\n\n        for (var i = 0, il = joints.length; i < il; i++) {\n          nodeDefs[joints[i]].isBone = true;\n        }\n      } // Iterate over all nodes, marking references to shared resources,\n      // as well as skeleton joints.\n\n\n      for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n        var nodeDef = nodeDefs[nodeIndex];\n\n        if (nodeDef.mesh !== undefined) {\n          this._addNodeRef(this.meshCache, nodeDef.mesh); // Nothing in the mesh definition indicates whether it is\n          // a SkinnedMesh or Mesh. Use the node's mesh reference\n          // to mark SkinnedMesh if node has skin.\n\n\n          if (nodeDef.skin !== undefined) {\n            meshDefs[nodeDef.mesh].isSkinnedMesh = true;\n          }\n        }\n\n        if (nodeDef.camera !== undefined) {\n          this._addNodeRef(this.cameraCache, nodeDef.camera);\n        }\n      }\n    }\n    /**\n     * Counts references to shared node / Object3D resources. These resources\n     * can be reused, or \"instantiated\", at multiple nodes in the scene\n     * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n     * be marked. Non-scenegraph resources (like Materials, Geometries, and\n     * Textures) can be reused directly and are not marked here.\n     *\n     * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n     */\n\n  }, {\n    key: \"_addNodeRef\",\n    value: function _addNodeRef(cache, index) {\n      if (index === undefined) return;\n\n      if (cache.refs[index] === undefined) {\n        cache.refs[index] = cache.uses[index] = 0;\n      }\n\n      cache.refs[index]++;\n    }\n    /** Returns a reference to a shared resource, cloning it if necessary. */\n\n  }, {\n    key: \"_getNodeRef\",\n    value: function _getNodeRef(cache, index, object) {\n      var _this3 = this;\n\n      if (cache.refs[index] <= 1) return object;\n      var ref = object.clone(); // Propagates mappings to the cloned object, prevents mappings on the\n      // original object from being lost.\n\n      var updateMappings = function updateMappings(original, clone) {\n        var mappings = _this3.associations.get(original);\n\n        if (mappings != null) {\n          _this3.associations.set(clone, mappings);\n        }\n\n        var _iterator = _createForOfIteratorHelper(original.children.entries()),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _step$value = _slicedToArray(_step.value, 2),\n                i = _step$value[0],\n                child = _step$value[1];\n\n            updateMappings(child, clone.children[i]);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      };\n\n      updateMappings(object, ref);\n      ref.name += '_instance_' + cache.uses[index]++;\n      return ref;\n    }\n  }, {\n    key: \"_invokeOne\",\n    value: function _invokeOne(func) {\n      var extensions = Object.values(this.plugins);\n      extensions.push(this);\n\n      for (var i = 0; i < extensions.length; i++) {\n        var result = func(extensions[i]);\n        if (result) return result;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_invokeAll\",\n    value: function _invokeAll(func) {\n      var extensions = Object.values(this.plugins);\n      extensions.unshift(this);\n      var pending = [];\n\n      for (var i = 0; i < extensions.length; i++) {\n        var result = func(extensions[i]);\n        if (result) pending.push(result);\n      }\n\n      return pending;\n    }\n    /**\n     * Requests the specified dependency asynchronously, with caching.\n     * @param {string} type\n     * @param {number} index\n     * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n     */\n\n  }, {\n    key: \"getDependency\",\n    value: function getDependency(type, index) {\n      var cacheKey = type + ':' + index;\n      var dependency = this.cache.get(cacheKey);\n\n      if (!dependency) {\n        switch (type) {\n          case 'scene':\n            dependency = this.loadScene(index);\n            break;\n\n          case 'node':\n            dependency = this.loadNode(index);\n            break;\n\n          case 'mesh':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadMesh && ext.loadMesh(index);\n            });\n            break;\n\n          case 'accessor':\n            dependency = this.loadAccessor(index);\n            break;\n\n          case 'bufferView':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadBufferView && ext.loadBufferView(index);\n            });\n            break;\n\n          case 'buffer':\n            dependency = this.loadBuffer(index);\n            break;\n\n          case 'material':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadMaterial && ext.loadMaterial(index);\n            });\n            break;\n\n          case 'texture':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadTexture && ext.loadTexture(index);\n            });\n            break;\n\n          case 'skin':\n            dependency = this.loadSkin(index);\n            break;\n\n          case 'animation':\n            dependency = this.loadAnimation(index);\n            break;\n\n          case 'camera':\n            dependency = this.loadCamera(index);\n            break;\n\n          default:\n            throw new Error('Unknown type: ' + type);\n        }\n\n        this.cache.add(cacheKey, dependency);\n      }\n\n      return dependency;\n    }\n    /**\n     * Requests all dependencies of the specified type asynchronously, with caching.\n     * @param {string} type\n     * @return {Promise<Array<Object>>}\n     */\n\n  }, {\n    key: \"getDependencies\",\n    value: function getDependencies(type) {\n      var dependencies = this.cache.get(type);\n\n      if (!dependencies) {\n        var parser = this;\n        var defs = this.json[type + (type === 'mesh' ? 'es' : 's')] || [];\n        dependencies = Promise.all(defs.map(function (def, index) {\n          return parser.getDependency(type, index);\n        }));\n        this.cache.add(type, dependencies);\n      }\n\n      return dependencies;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n     * @param {number} bufferIndex\n     * @return {Promise<ArrayBuffer>}\n     */\n\n  }, {\n    key: \"loadBuffer\",\n    value: function loadBuffer(bufferIndex) {\n      var bufferDef = this.json.buffers[bufferIndex];\n      var loader = this.fileLoader;\n\n      if (bufferDef.type && bufferDef.type !== 'arraybuffer') {\n        throw new Error('THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.');\n      } // If present, GLB container is required to be the first buffer.\n\n\n      if (bufferDef.uri === undefined && bufferIndex === 0) {\n        return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\n      }\n\n      var options = this.options;\n      return new Promise(function (resolve, reject) {\n        loader.load(LoaderUtils.resolveURL(bufferDef.uri, options.path), resolve, undefined, function () {\n          reject(new Error('THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\n        });\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n     * @param {number} bufferViewIndex\n     * @return {Promise<ArrayBuffer>}\n     */\n\n  }, {\n    key: \"loadBufferView\",\n    value: function loadBufferView(bufferViewIndex) {\n      var bufferViewDef = this.json.bufferViews[bufferViewIndex];\n      return this.getDependency('buffer', bufferViewDef.buffer).then(function (buffer) {\n        var byteLength = bufferViewDef.byteLength || 0;\n        var byteOffset = bufferViewDef.byteOffset || 0;\n        return buffer.slice(byteOffset, byteOffset + byteLength);\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n     * @param {number} accessorIndex\n     * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n     */\n\n  }, {\n    key: \"loadAccessor\",\n    value: function loadAccessor(accessorIndex) {\n      var parser = this;\n      var json = this.json;\n      var accessorDef = this.json.accessors[accessorIndex];\n\n      if (accessorDef.bufferView === undefined && accessorDef.sparse === undefined) {\n        // Ignore empty accessors, which may be used to declare runtime\n        // information about attributes coming from another source (e.g. Draco\n        // compression extension).\n        return Promise.resolve(null);\n      }\n\n      var pendingBufferViews = [];\n\n      if (accessorDef.bufferView !== undefined) {\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.bufferView));\n      } else {\n        pendingBufferViews.push(null);\n      }\n\n      if (accessorDef.sparse !== undefined) {\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.indices.bufferView));\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.values.bufferView));\n      }\n\n      return Promise.all(pendingBufferViews).then(function (bufferViews) {\n        var bufferView = bufferViews[0];\n        var itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n        var TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType]; // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\n        var elementBytes = TypedArray.BYTES_PER_ELEMENT;\n        var itemBytes = elementBytes * itemSize;\n        var byteOffset = accessorDef.byteOffset || 0;\n        var byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[accessorDef.bufferView].byteStride : undefined;\n        var normalized = accessorDef.normalized === true;\n        var array, bufferAttribute; // The buffer is not interleaved if the stride is the item size in bytes.\n\n        if (byteStride && byteStride !== itemBytes) {\n          // Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n          // This makes sure that IBA.count reflects accessor.count properly\n          var ibSlice = Math.floor(byteOffset / byteStride);\n          var ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n          var ib = parser.cache.get(ibCacheKey);\n\n          if (!ib) {\n            array = new TypedArray(bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes); // Integer parameters to IB/IBA are in array elements, not bytes.\n\n            ib = new InterleavedBuffer(array, byteStride / elementBytes);\n            parser.cache.add(ibCacheKey, ib);\n          }\n\n          bufferAttribute = new InterleavedBufferAttribute(ib, itemSize, byteOffset % byteStride / elementBytes, normalized);\n        } else {\n          if (bufferView === null) {\n            array = new TypedArray(accessorDef.count * itemSize);\n          } else {\n            array = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize);\n          }\n\n          bufferAttribute = new BufferAttribute(array, itemSize, normalized);\n        } // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\n\n        if (accessorDef.sparse !== undefined) {\n          var itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n          var TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\n          var byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n          var byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n          var sparseIndices = new TypedArrayIndices(bufferViews[1], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices);\n          var sparseValues = new TypedArray(bufferViews[2], byteOffsetValues, accessorDef.sparse.count * itemSize);\n\n          if (bufferView !== null) {\n            // Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n            bufferAttribute = new BufferAttribute(bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized);\n          }\n\n          for (var i = 0, il = sparseIndices.length; i < il; i++) {\n            var index = sparseIndices[i];\n            bufferAttribute.setX(index, sparseValues[i * itemSize]);\n            if (itemSize >= 2) bufferAttribute.setY(index, sparseValues[i * itemSize + 1]);\n            if (itemSize >= 3) bufferAttribute.setZ(index, sparseValues[i * itemSize + 2]);\n            if (itemSize >= 4) bufferAttribute.setW(index, sparseValues[i * itemSize + 3]);\n            if (itemSize >= 5) throw new Error('THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.');\n          }\n        }\n\n        return bufferAttribute;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n     * @param {number} textureIndex\n     * @return {Promise<THREE.Texture>}\n     */\n\n  }, {\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var json = this.json;\n      var options = this.options;\n      var textureDef = json.textures[textureIndex];\n      var source = json.images[textureDef.source];\n      var loader = this.textureLoader;\n\n      if (source.uri) {\n        var handler = options.manager.getHandler(source.uri);\n        if (handler !== null) loader = handler;\n      }\n\n      return this.loadTextureImage(textureIndex, source, loader);\n    }\n  }, {\n    key: \"loadTextureImage\",\n    value: function loadTextureImage(textureIndex, source, loader) {\n      var parser = this;\n      var json = this.json;\n      var options = this.options;\n      var textureDef = json.textures[textureIndex];\n      var cacheKey = (source.uri || source.bufferView) + ':' + textureDef.sampler;\n\n      if (this.textureCache[cacheKey]) {\n        // See https://github.com/mrdoob/three.js/issues/21559.\n        return this.textureCache[cacheKey];\n      }\n\n      var URL = self.URL || self.webkitURL;\n      var sourceURI = source.uri || '';\n      var isObjectURL = false;\n\n      if (source.bufferView !== undefined) {\n        // Load binary image data from bufferView, if provided.\n        sourceURI = parser.getDependency('bufferView', source.bufferView).then(function (bufferView) {\n          isObjectURL = true;\n          var blob = new Blob([bufferView], {\n            type: source.mimeType\n          });\n          sourceURI = URL.createObjectURL(blob);\n          return sourceURI;\n        });\n      } else if (source.uri === undefined) {\n        throw new Error('THREE.GLTFLoader: Image ' + textureIndex + ' is missing URI and bufferView');\n      }\n\n      var promise = Promise.resolve(sourceURI).then(function (sourceURI) {\n        return new Promise(function (resolve, reject) {\n          var onLoad = resolve;\n\n          if (loader.isImageBitmapLoader === true) {\n            onLoad = function onLoad(imageBitmap) {\n              var texture = new Texture(imageBitmap);\n              texture.needsUpdate = true;\n              resolve(texture);\n            };\n          }\n\n          loader.load(LoaderUtils.resolveURL(sourceURI, options.path), onLoad, undefined, reject);\n        });\n      }).then(function (texture) {\n        // Clean up resources and configure Texture.\n        if (isObjectURL === true) {\n          URL.revokeObjectURL(sourceURI);\n        }\n\n        texture.flipY = false;\n        if (textureDef.name) texture.name = textureDef.name;\n        var samplers = json.samplers || {};\n        var sampler = samplers[textureDef.sampler] || {};\n        texture.magFilter = WEBGL_FILTERS[sampler.magFilter] || LinearFilter;\n        texture.minFilter = WEBGL_FILTERS[sampler.minFilter] || LinearMipmapLinearFilter;\n        texture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || RepeatWrapping;\n        texture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || RepeatWrapping;\n        parser.associations.set(texture, {\n          textures: textureIndex\n        });\n        return texture;\n      }).catch(function () {\n        console.error('THREE.GLTFLoader: Couldn\\'t load texture', sourceURI);\n        return null;\n      });\n      this.textureCache[cacheKey] = promise;\n      return promise;\n    }\n    /**\n     * Asynchronously assigns a texture to the given material parameters.\n     * @param {Object} materialParams\n     * @param {string} mapName\n     * @param {Object} mapDef\n     * @return {Promise<Texture>}\n     */\n\n  }, {\n    key: \"assignTexture\",\n    value: function assignTexture(materialParams, mapName, mapDef) {\n      var parser = this;\n      return this.getDependency('texture', mapDef.index).then(function (texture) {\n        // Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n        // However, we will copy UV set 0 to UV set 1 on demand for aoMap\n        if (mapDef.texCoord !== undefined && mapDef.texCoord != 0 && !(mapName === 'aoMap' && mapDef.texCoord == 1)) {\n          console.warn('THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.');\n        }\n\n        if (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\n          var transform = mapDef.extensions !== undefined ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] : undefined;\n\n          if (transform) {\n            var gltfReference = parser.associations.get(texture);\n            texture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(texture, transform);\n            parser.associations.set(texture, gltfReference);\n          }\n        }\n\n        materialParams[mapName] = texture;\n        return texture;\n      });\n    }\n    /**\n     * Assigns final material to a Mesh, Line, or Points instance. The instance\n     * already has a material (generated from the glTF material options alone)\n     * but reuse of the same glTF material may require multiple threejs materials\n     * to accommodate different primitive types, defines, etc. New materials will\n     * be created if necessary, and reused from a cache.\n     * @param  {Object3D} mesh Mesh, Line, or Points instance.\n     */\n\n  }, {\n    key: \"assignFinalMaterial\",\n    value: function assignFinalMaterial(mesh) {\n      var geometry = mesh.geometry;\n      var material = mesh.material;\n      var useDerivativeTangents = geometry.attributes.tangent === undefined;\n      var useVertexColors = geometry.attributes.color !== undefined;\n      var useFlatShading = geometry.attributes.normal === undefined;\n\n      if (mesh.isPoints) {\n        var cacheKey = 'PointsMaterial:' + material.uuid;\n        var pointsMaterial = this.cache.get(cacheKey);\n\n        if (!pointsMaterial) {\n          pointsMaterial = new PointsMaterial();\n          Material.prototype.copy.call(pointsMaterial, material);\n          pointsMaterial.color.copy(material.color);\n          pointsMaterial.map = material.map;\n          pointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n          this.cache.add(cacheKey, pointsMaterial);\n        }\n\n        material = pointsMaterial;\n      } else if (mesh.isLine) {\n        var _cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n        var lineMaterial = this.cache.get(_cacheKey);\n\n        if (!lineMaterial) {\n          lineMaterial = new LineBasicMaterial();\n          Material.prototype.copy.call(lineMaterial, material);\n          lineMaterial.color.copy(material.color);\n          this.cache.add(_cacheKey, lineMaterial);\n        }\n\n        material = lineMaterial;\n      } // Clone the material if it will be modified\n\n\n      if (useDerivativeTangents || useVertexColors || useFlatShading) {\n        var _cacheKey2 = 'ClonedMaterial:' + material.uuid + ':';\n\n        if (material.isGLTFSpecularGlossinessMaterial) _cacheKey2 += 'specular-glossiness:';\n        if (useDerivativeTangents) _cacheKey2 += 'derivative-tangents:';\n        if (useVertexColors) _cacheKey2 += 'vertex-colors:';\n        if (useFlatShading) _cacheKey2 += 'flat-shading:';\n        var cachedMaterial = this.cache.get(_cacheKey2);\n\n        if (!cachedMaterial) {\n          cachedMaterial = material.clone();\n          if (useVertexColors) cachedMaterial.vertexColors = true;\n          if (useFlatShading) cachedMaterial.flatShading = true;\n\n          if (useDerivativeTangents) {\n            // https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n            if (cachedMaterial.normalScale) cachedMaterial.normalScale.y *= -1;\n            if (cachedMaterial.clearcoatNormalScale) cachedMaterial.clearcoatNormalScale.y *= -1;\n          }\n\n          this.cache.add(_cacheKey2, cachedMaterial);\n          this.associations.set(cachedMaterial, this.associations.get(material));\n        }\n\n        material = cachedMaterial;\n      } // workarounds for mesh and geometry\n\n\n      if (material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined) {\n        geometry.setAttribute('uv2', geometry.attributes.uv);\n      }\n\n      mesh.material = material;\n    }\n  }, {\n    key: \"getMaterialType\",\n    value: function\n      /* materialIndex */\n    getMaterialType() {\n      return MeshStandardMaterial;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n     * @param {number} materialIndex\n     * @return {Promise<Material>}\n     */\n\n  }, {\n    key: \"loadMaterial\",\n    value: function loadMaterial(materialIndex) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions;\n      var materialDef = json.materials[materialIndex];\n      var materialType;\n      var materialParams = {};\n      var materialExtensions = materialDef.extensions || {};\n      var pending = [];\n\n      if (materialExtensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {\n        var sgExtension = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];\n        materialType = sgExtension.getMaterialType();\n        pending.push(sgExtension.extendParams(materialParams, materialDef, parser));\n      } else if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\n        var kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT];\n        materialType = kmuExtension.getMaterialType();\n        pending.push(kmuExtension.extendParams(materialParams, materialDef, parser));\n      } else {\n        // Specification:\n        // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n        var metallicRoughness = materialDef.pbrMetallicRoughness || {};\n        materialParams.color = new Color(1.0, 1.0, 1.0);\n        materialParams.opacity = 1.0;\n\n        if (Array.isArray(metallicRoughness.baseColorFactor)) {\n          var array = metallicRoughness.baseColorFactor;\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n        }\n\n        if (metallicRoughness.baseColorTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n        }\n\n        materialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n        materialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n        if (metallicRoughness.metallicRoughnessTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture));\n          pending.push(parser.assignTexture(materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture));\n        }\n\n        materialType = this._invokeOne(function (ext) {\n          return ext.getMaterialType && ext.getMaterialType(materialIndex);\n        });\n        pending.push(Promise.all(this._invokeAll(function (ext) {\n          return ext.extendMaterialParams && ext.extendMaterialParams(materialIndex, materialParams);\n        })));\n      }\n\n      if (materialDef.doubleSided === true) {\n        materialParams.side = DoubleSide;\n      }\n\n      var alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n      if (alphaMode === ALPHA_MODES.BLEND) {\n        materialParams.transparent = true; // See: https://github.com/mrdoob/three.js/issues/17706\n\n        materialParams.depthWrite = false;\n      } else {\n        materialParams.transparent = false;\n\n        if (alphaMode === ALPHA_MODES.MASK) {\n          materialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n        }\n      }\n\n      if (materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'normalMap', materialDef.normalTexture));\n        materialParams.normalScale = new Vector2(1, 1);\n\n        if (materialDef.normalTexture.scale !== undefined) {\n          var scale = materialDef.normalTexture.scale;\n          materialParams.normalScale.set(scale, scale);\n        }\n      }\n\n      if (materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'aoMap', materialDef.occlusionTexture));\n\n        if (materialDef.occlusionTexture.strength !== undefined) {\n          materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n        }\n      }\n\n      if (materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial) {\n        materialParams.emissive = new Color().fromArray(materialDef.emissiveFactor);\n      }\n\n      if (materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'emissiveMap', materialDef.emissiveTexture));\n      }\n\n      return Promise.all(pending).then(function () {\n        var material;\n\n        if (materialType === GLTFMeshStandardSGMaterial) {\n          material = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(materialParams);\n        } else {\n          material = new materialType(materialParams);\n        }\n\n        if (materialDef.name) material.name = materialDef.name; // baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\n        if (material.map) material.map.encoding = sRGBEncoding;\n        if (material.emissiveMap) material.emissiveMap.encoding = sRGBEncoding;\n        assignExtrasToUserData(material, materialDef);\n        parser.associations.set(material, {\n          materials: materialIndex\n        });\n        if (materialDef.extensions) addUnknownExtensionsToUserData(extensions, material, materialDef);\n        return material;\n      });\n    }\n    /** When Object3D instances are targeted by animation, they need unique names. */\n\n  }, {\n    key: \"createUniqueName\",\n    value: function createUniqueName(originalName) {\n      var sanitizedName = PropertyBinding.sanitizeNodeName(originalName || '');\n      var name = sanitizedName;\n\n      for (var i = 1; this.nodeNamesUsed[name]; ++i) {\n        name = sanitizedName + '_' + i;\n      }\n\n      this.nodeNamesUsed[name] = true;\n      return name;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n     *\n     * Creates BufferGeometries from primitives.\n     *\n     * @param {Array<GLTF.Primitive>} primitives\n     * @return {Promise<Array<BufferGeometry>>}\n     */\n\n  }, {\n    key: \"loadGeometries\",\n    value: function loadGeometries(primitives) {\n      var parser = this;\n      var extensions = this.extensions;\n      var cache = this.primitiveCache;\n\n      function createDracoPrimitive(primitive) {\n        return extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(primitive, parser).then(function (geometry) {\n          return addPrimitiveAttributes(geometry, primitive, parser);\n        });\n      }\n\n      var pending = [];\n\n      for (var i = 0, il = primitives.length; i < il; i++) {\n        var primitive = primitives[i];\n        var cacheKey = createPrimitiveKey(primitive); // See if we've already created this geometry\n\n        var cached = cache[cacheKey];\n\n        if (cached) {\n          // Use the cached geometry if it exists\n          pending.push(cached.promise);\n        } else {\n          var geometryPromise = void 0;\n\n          if (primitive.extensions && primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]) {\n            // Use DRACO geometry if available\n            geometryPromise = createDracoPrimitive(primitive);\n          } else {\n            // Otherwise create a new geometry\n            geometryPromise = addPrimitiveAttributes(new BufferGeometry(), primitive, parser);\n          } // Cache this geometry\n\n\n          cache[cacheKey] = {\n            primitive: primitive,\n            promise: geometryPromise\n          };\n          pending.push(geometryPromise);\n        }\n      }\n\n      return Promise.all(pending);\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n     * @param {number} meshIndex\n     * @return {Promise<Group|Mesh|SkinnedMesh>}\n     */\n\n  }, {\n    key: \"loadMesh\",\n    value: function loadMesh(meshIndex) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions;\n      var meshDef = json.meshes[meshIndex];\n      var primitives = meshDef.primitives;\n      var pending = [];\n\n      for (var i = 0, il = primitives.length; i < il; i++) {\n        var material = primitives[i].material === undefined ? createDefaultMaterial(this.cache) : this.getDependency('material', primitives[i].material);\n        pending.push(material);\n      }\n\n      pending.push(parser.loadGeometries(primitives));\n      return Promise.all(pending).then(function (results) {\n        var materials = results.slice(0, results.length - 1);\n        var geometries = results[results.length - 1];\n        var meshes = [];\n\n        for (var _i4 = 0, _il3 = geometries.length; _i4 < _il3; _i4++) {\n          var geometry = geometries[_i4];\n          var primitive = primitives[_i4]; // 1. create Mesh\n\n          var mesh = void 0;\n          var _material = materials[_i4];\n\n          if (primitive.mode === WEBGL_CONSTANTS.TRIANGLES || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN || primitive.mode === undefined) {\n            // .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n            mesh = meshDef.isSkinnedMesh === true ? new SkinnedMesh(geometry, _material) : new Mesh(geometry, _material);\n\n            if (mesh.isSkinnedMesh === true && !mesh.geometry.attributes.skinWeight.normalized) {\n              // we normalize floating point skin weight array to fix malformed assets (see #15319)\n              // it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n              mesh.normalizeSkinWeights();\n            }\n\n            if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\n              mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleStripDrawMode);\n            } else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\n              mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleFanDrawMode);\n            }\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\n            mesh = new LineSegments(geometry, _material);\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\n            mesh = new Line(geometry, _material);\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\n            mesh = new LineLoop(geometry, _material);\n          } else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\n            mesh = new Points(geometry, _material);\n          } else {\n            throw new Error('THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode);\n          }\n\n          if (Object.keys(mesh.geometry.morphAttributes).length > 0) {\n            updateMorphTargets(mesh, meshDef);\n          }\n\n          mesh.name = parser.createUniqueName(meshDef.name || 'mesh_' + meshIndex);\n          assignExtrasToUserData(mesh, meshDef);\n          if (primitive.extensions) addUnknownExtensionsToUserData(extensions, mesh, primitive);\n          parser.assignFinalMaterial(mesh);\n          meshes.push(mesh);\n        }\n\n        for (var _i5 = 0, _il4 = meshes.length; _i5 < _il4; _i5++) {\n          parser.associations.set(meshes[_i5], {\n            meshes: meshIndex,\n            primitives: _i5\n          });\n        }\n\n        if (meshes.length === 1) {\n          return meshes[0];\n        }\n\n        var group = new Group();\n        parser.associations.set(group, {\n          meshes: meshIndex\n        });\n\n        for (var _i6 = 0, _il5 = meshes.length; _i6 < _il5; _i6++) {\n          group.add(meshes[_i6]);\n        }\n\n        return group;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n     * @param {number} cameraIndex\n     * @return {Promise<THREE.Camera>}\n     */\n\n  }, {\n    key: \"loadCamera\",\n    value: function loadCamera(cameraIndex) {\n      var camera;\n      var cameraDef = this.json.cameras[cameraIndex];\n      var params = cameraDef[cameraDef.type];\n\n      if (!params) {\n        console.warn('THREE.GLTFLoader: Missing camera parameters.');\n        return;\n      }\n\n      if (cameraDef.type === 'perspective') {\n        camera = new PerspectiveCamera(MathUtils.radToDeg(params.yfov), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6);\n      } else if (cameraDef.type === 'orthographic') {\n        camera = new OrthographicCamera(-params.xmag, params.xmag, params.ymag, -params.ymag, params.znear, params.zfar);\n      }\n\n      if (cameraDef.name) camera.name = this.createUniqueName(cameraDef.name);\n      assignExtrasToUserData(camera, cameraDef);\n      return Promise.resolve(camera);\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n     * @param {number} skinIndex\n     * @return {Promise<Object>}\n     */\n\n  }, {\n    key: \"loadSkin\",\n    value: function loadSkin(skinIndex) {\n      var skinDef = this.json.skins[skinIndex];\n      var skinEntry = {\n        joints: skinDef.joints\n      };\n\n      if (skinDef.inverseBindMatrices === undefined) {\n        return Promise.resolve(skinEntry);\n      }\n\n      return this.getDependency('accessor', skinDef.inverseBindMatrices).then(function (accessor) {\n        skinEntry.inverseBindMatrices = accessor;\n        return skinEntry;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n     * @param {number} animationIndex\n     * @return {Promise<AnimationClip>}\n     */\n\n  }, {\n    key: \"loadAnimation\",\n    value: function loadAnimation(animationIndex) {\n      var json = this.json;\n      var animationDef = json.animations[animationIndex];\n      var pendingNodes = [];\n      var pendingInputAccessors = [];\n      var pendingOutputAccessors = [];\n      var pendingSamplers = [];\n      var pendingTargets = [];\n\n      for (var i = 0, il = animationDef.channels.length; i < il; i++) {\n        var channel = animationDef.channels[i];\n        var sampler = animationDef.samplers[channel.sampler];\n        var target = channel.target;\n        var name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\n        var input = animationDef.parameters !== undefined ? animationDef.parameters[sampler.input] : sampler.input;\n        var output = animationDef.parameters !== undefined ? animationDef.parameters[sampler.output] : sampler.output;\n        pendingNodes.push(this.getDependency('node', name));\n        pendingInputAccessors.push(this.getDependency('accessor', input));\n        pendingOutputAccessors.push(this.getDependency('accessor', output));\n        pendingSamplers.push(sampler);\n        pendingTargets.push(target);\n      }\n\n      return Promise.all([Promise.all(pendingNodes), Promise.all(pendingInputAccessors), Promise.all(pendingOutputAccessors), Promise.all(pendingSamplers), Promise.all(pendingTargets)]).then(function (dependencies) {\n        var nodes = dependencies[0];\n        var inputAccessors = dependencies[1];\n        var outputAccessors = dependencies[2];\n        var samplers = dependencies[3];\n        var targets = dependencies[4];\n        var tracks = [];\n\n        var _loop = function _loop(_i7, _il6) {\n          var node = nodes[_i7];\n          var inputAccessor = inputAccessors[_i7];\n          var outputAccessor = outputAccessors[_i7];\n          var sampler = samplers[_i7];\n          var target = targets[_i7];\n          if (node === undefined) return \"continue\";\n          node.updateMatrix();\n          node.matrixAutoUpdate = true;\n          var TypedKeyframeTrack = void 0;\n\n          switch (PATH_PROPERTIES[target.path]) {\n            case PATH_PROPERTIES.weights:\n              TypedKeyframeTrack = NumberKeyframeTrack;\n              break;\n\n            case PATH_PROPERTIES.rotation:\n              TypedKeyframeTrack = QuaternionKeyframeTrack;\n              break;\n\n            case PATH_PROPERTIES.position:\n            case PATH_PROPERTIES.scale:\n            default:\n              TypedKeyframeTrack = VectorKeyframeTrack;\n              break;\n          }\n\n          var targetName = node.name ? node.name : node.uuid;\n          var interpolation = sampler.interpolation !== undefined ? INTERPOLATION[sampler.interpolation] : InterpolateLinear;\n          var targetNames = [];\n\n          if (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\n            node.traverse(function (object) {\n              if (object.morphTargetInfluences) {\n                targetNames.push(object.name ? object.name : object.uuid);\n              }\n            });\n          } else {\n            targetNames.push(targetName);\n          }\n\n          var outputArray = outputAccessor.array;\n\n          if (outputAccessor.normalized) {\n            var scale = getNormalizedComponentScale(outputArray.constructor);\n            var scaled = new Float32Array(outputArray.length);\n\n            for (var j = 0, jl = outputArray.length; j < jl; j++) {\n              scaled[j] = outputArray[j] * scale;\n            }\n\n            outputArray = scaled;\n          }\n\n          for (var _j = 0, _jl = targetNames.length; _j < _jl; _j++) {\n            var track = new TypedKeyframeTrack(targetNames[_j] + '.' + PATH_PROPERTIES[target.path], inputAccessor.array, outputArray, interpolation); // Override interpolation with custom factory method.\n\n            if (sampler.interpolation === 'CUBICSPLINE') {\n              track.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\n                // A CUBICSPLINE keyframe in glTF has three output values for each input value,\n                // representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n                // must be divided by three to get the interpolant's sampleSize argument.\n                var interpolantType = this instanceof QuaternionKeyframeTrack ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n                return new interpolantType(this.times, this.values, this.getValueSize() / 3, result);\n              }; // Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\n\n              track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n            }\n\n            tracks.push(track);\n          }\n        };\n\n        for (var _i7 = 0, _il6 = nodes.length; _i7 < _il6; _i7++) {\n          var _ret = _loop(_i7, _il6);\n\n          if (_ret === \"continue\") continue;\n        }\n\n        var name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n        return new AnimationClip(name, undefined, tracks);\n      });\n    }\n  }, {\n    key: \"createNodeMesh\",\n    value: function createNodeMesh(nodeIndex) {\n      var json = this.json;\n      var parser = this;\n      var nodeDef = json.nodes[nodeIndex];\n      if (nodeDef.mesh === undefined) return null;\n      return parser.getDependency('mesh', nodeDef.mesh).then(function (mesh) {\n        var node = parser._getNodeRef(parser.meshCache, nodeDef.mesh, mesh); // if weights are provided on the node, override weights on the mesh.\n\n\n        if (nodeDef.weights !== undefined) {\n          node.traverse(function (o) {\n            if (!o.isMesh) return;\n\n            for (var i = 0, il = nodeDef.weights.length; i < il; i++) {\n              o.morphTargetInfluences[i] = nodeDef.weights[i];\n            }\n          });\n        }\n\n        return node;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n     * @param {number} nodeIndex\n     * @return {Promise<Object3D>}\n     */\n\n  }, {\n    key: \"loadNode\",\n    value: function loadNode(nodeIndex) {\n      var json = this.json;\n      var extensions = this.extensions;\n      var parser = this;\n      var nodeDef = json.nodes[nodeIndex]; // reserve node's name before its dependencies, so the root has the intended name.\n\n      var nodeName = nodeDef.name ? parser.createUniqueName(nodeDef.name) : '';\n      return function () {\n        var pending = [];\n\n        var meshPromise = parser._invokeOne(function (ext) {\n          return ext.createNodeMesh && ext.createNodeMesh(nodeIndex);\n        });\n\n        if (meshPromise) {\n          pending.push(meshPromise);\n        }\n\n        if (nodeDef.camera !== undefined) {\n          pending.push(parser.getDependency('camera', nodeDef.camera).then(function (camera) {\n            return parser._getNodeRef(parser.cameraCache, nodeDef.camera, camera);\n          }));\n        }\n\n        parser._invokeAll(function (ext) {\n          return ext.createNodeAttachment && ext.createNodeAttachment(nodeIndex);\n        }).forEach(function (promise) {\n          pending.push(promise);\n        });\n\n        return Promise.all(pending);\n      }().then(function (objects) {\n        var node; // .isBone isn't in glTF spec. See ._markDefs\n\n        if (nodeDef.isBone === true) {\n          node = new Bone();\n        } else if (objects.length > 1) {\n          node = new Group();\n        } else if (objects.length === 1) {\n          node = objects[0];\n        } else {\n          node = new Object3D();\n        }\n\n        if (node !== objects[0]) {\n          for (var i = 0, il = objects.length; i < il; i++) {\n            node.add(objects[i]);\n          }\n        }\n\n        if (nodeDef.name) {\n          node.userData.name = nodeDef.name;\n          node.name = nodeName;\n        }\n\n        assignExtrasToUserData(node, nodeDef);\n        if (nodeDef.extensions) addUnknownExtensionsToUserData(extensions, node, nodeDef);\n\n        if (nodeDef.matrix !== undefined) {\n          var matrix = new Matrix4();\n          matrix.fromArray(nodeDef.matrix);\n          node.applyMatrix4(matrix);\n        } else {\n          if (nodeDef.translation !== undefined) {\n            node.position.fromArray(nodeDef.translation);\n          }\n\n          if (nodeDef.rotation !== undefined) {\n            node.quaternion.fromArray(nodeDef.rotation);\n          }\n\n          if (nodeDef.scale !== undefined) {\n            node.scale.fromArray(nodeDef.scale);\n          }\n        }\n\n        if (!parser.associations.has(node)) {\n          parser.associations.set(node, {});\n        }\n\n        parser.associations.get(node).nodes = nodeIndex;\n        return node;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n     * @param {number} sceneIndex\n     * @return {Promise<Group>}\n     */\n\n  }, {\n    key: \"loadScene\",\n    value: function loadScene(sceneIndex) {\n      var json = this.json;\n      var extensions = this.extensions;\n      var sceneDef = this.json.scenes[sceneIndex];\n      var parser = this; // Loader returns Group, not Scene.\n      // See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\n      var scene = new Group();\n      if (sceneDef.name) scene.name = parser.createUniqueName(sceneDef.name);\n      assignExtrasToUserData(scene, sceneDef);\n      if (sceneDef.extensions) addUnknownExtensionsToUserData(extensions, scene, sceneDef);\n      var nodeIds = sceneDef.nodes || [];\n      var pending = [];\n\n      for (var i = 0, il = nodeIds.length; i < il; i++) {\n        pending.push(buildNodeHierarchy(nodeIds[i], scene, json, parser));\n      }\n\n      return Promise.all(pending).then(function () {\n        // Removes dangling associations, associations that reference a node that\n        // didn't make it into the scene.\n        var reduceAssociations = function reduceAssociations(node) {\n          var reducedAssociations = new Map();\n\n          var _iterator2 = _createForOfIteratorHelper(parser.associations),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var _step2$value = _slicedToArray(_step2.value, 2),\n                  key = _step2$value[0],\n                  value = _step2$value[1];\n\n              if (key instanceof Material || key instanceof Texture) {\n                reducedAssociations.set(key, value);\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n\n          node.traverse(function (node) {\n            var mappings = parser.associations.get(node);\n\n            if (mappings != null) {\n              reducedAssociations.set(node, mappings);\n            }\n          });\n          return reducedAssociations;\n        };\n\n        parser.associations = reduceAssociations(scene);\n        return scene;\n      });\n    }\n  }]);\n\n  return GLTFParser;\n}();\n\nfunction buildNodeHierarchy(nodeId, parentObject, json, parser) {\n  var nodeDef = json.nodes[nodeId];\n  return parser.getDependency('node', nodeId).then(function (node) {\n    if (nodeDef.skin === undefined) return node; // build skeleton here as well\n\n    var skinEntry;\n    return parser.getDependency('skin', nodeDef.skin).then(function (skin) {\n      skinEntry = skin;\n      var pendingJoints = [];\n\n      for (var i = 0, il = skinEntry.joints.length; i < il; i++) {\n        pendingJoints.push(parser.getDependency('node', skinEntry.joints[i]));\n      }\n\n      return Promise.all(pendingJoints);\n    }).then(function (jointNodes) {\n      node.traverse(function (mesh) {\n        if (!mesh.isMesh) return;\n        var bones = [];\n        var boneInverses = [];\n\n        for (var j = 0, jl = jointNodes.length; j < jl; j++) {\n          var jointNode = jointNodes[j];\n\n          if (jointNode) {\n            bones.push(jointNode);\n            var mat = new Matrix4();\n\n            if (skinEntry.inverseBindMatrices !== undefined) {\n              mat.fromArray(skinEntry.inverseBindMatrices.array, j * 16);\n            }\n\n            boneInverses.push(mat);\n          } else {\n            console.warn('THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[j]);\n          }\n        }\n\n        mesh.bind(new Skeleton(bones, boneInverses), mesh.matrixWorld);\n      });\n      return node;\n    });\n  }).then(function (node) {\n    // build node hierachy\n    parentObject.add(node);\n    var pending = [];\n\n    if (nodeDef.children) {\n      var children = nodeDef.children;\n\n      for (var i = 0, il = children.length; i < il; i++) {\n        var child = children[i];\n        pending.push(buildNodeHierarchy(child, node, json, parser));\n      }\n    }\n\n    return Promise.all(pending);\n  });\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\n\n\nfunction computeBounds(geometry, primitiveDef, parser) {\n  var attributes = primitiveDef.attributes;\n  var box = new Box3();\n\n  if (attributes.POSITION !== undefined) {\n    var accessor = parser.json.accessors[attributes.POSITION];\n    var min = accessor.min;\n    var max = accessor.max; // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n    if (min !== undefined && max !== undefined) {\n      box.set(new Vector3(min[0], min[1], min[2]), new Vector3(max[0], max[1], max[2]));\n\n      if (accessor.normalized) {\n        var boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[accessor.componentType]);\n        box.min.multiplyScalar(boxScale);\n        box.max.multiplyScalar(boxScale);\n      }\n    } else {\n      console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n      return;\n    }\n  } else {\n    return;\n  }\n\n  var targets = primitiveDef.targets;\n\n  if (targets !== undefined) {\n    var maxDisplacement = new Vector3();\n    var vector = new Vector3();\n\n    for (var i = 0, il = targets.length; i < il; i++) {\n      var target = targets[i];\n\n      if (target.POSITION !== undefined) {\n        var _accessor = parser.json.accessors[target.POSITION];\n        var _min = _accessor.min;\n        var _max = _accessor.max; // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n        if (_min !== undefined && _max !== undefined) {\n          // we need to get max of absolute components because target weight is [-1,1]\n          vector.setX(Math.max(Math.abs(_min[0]), Math.abs(_max[0])));\n          vector.setY(Math.max(Math.abs(_min[1]), Math.abs(_max[1])));\n          vector.setZ(Math.max(Math.abs(_min[2]), Math.abs(_max[2])));\n\n          if (_accessor.normalized) {\n            var _boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[_accessor.componentType]);\n\n            vector.multiplyScalar(_boxScale);\n          } // Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n          // to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n          // are used to implement key-frame animations and as such only two are active at a time - this results in very large\n          // boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\n\n          maxDisplacement.max(vector);\n        } else {\n          console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n        }\n      }\n    } // As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\n\n    box.expandByVector(maxDisplacement);\n  }\n\n  geometry.boundingBox = box;\n  var sphere = new Sphere();\n  box.getCenter(sphere.center);\n  sphere.radius = box.min.distanceTo(box.max) / 2;\n  geometry.boundingSphere = sphere;\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\n\n\nfunction addPrimitiveAttributes(geometry, primitiveDef, parser) {\n  var attributes = primitiveDef.attributes;\n  var pending = [];\n\n  function assignAttributeAccessor(accessorIndex, attributeName) {\n    return parser.getDependency('accessor', accessorIndex).then(function (accessor) {\n      geometry.setAttribute(attributeName, accessor);\n    });\n  }\n\n  for (var gltfAttributeName in attributes) {\n    var threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase(); // Skip attributes already provided by e.g. Draco extension.\n\n    if (threeAttributeName in geometry.attributes) continue;\n    pending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName));\n  }\n\n  if (primitiveDef.indices !== undefined && !geometry.index) {\n    var accessor = parser.getDependency('accessor', primitiveDef.indices).then(function (accessor) {\n      geometry.setIndex(accessor);\n    });\n    pending.push(accessor);\n  }\n\n  assignExtrasToUserData(geometry, primitiveDef);\n  computeBounds(geometry, primitiveDef, parser);\n  return Promise.all(pending).then(function () {\n    return primitiveDef.targets !== undefined ? addMorphTargets(geometry, primitiveDef.targets, parser) : geometry;\n  });\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {Number} drawMode\n * @return {BufferGeometry}\n */\n\n\nfunction toTrianglesDrawMode(geometry, drawMode) {\n  var index = geometry.getIndex(); // generate index if not present\n\n  if (index === null) {\n    var indices = [];\n    var position = geometry.getAttribute('position');\n\n    if (position !== undefined) {\n      for (var i = 0; i < position.count; i++) {\n        indices.push(i);\n      }\n\n      geometry.setIndex(indices);\n      index = geometry.getIndex();\n    } else {\n      console.error('THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.');\n      return geometry;\n    }\n  } //\n\n\n  var numberOfTriangles = index.count - 2;\n  var newIndices = [];\n\n  if (drawMode === TriangleFanDrawMode) {\n    // gl.TRIANGLE_FAN\n    for (var _i8 = 1; _i8 <= numberOfTriangles; _i8++) {\n      newIndices.push(index.getX(0));\n      newIndices.push(index.getX(_i8));\n      newIndices.push(index.getX(_i8 + 1));\n    }\n  } else {\n    // gl.TRIANGLE_STRIP\n    for (var _i9 = 0; _i9 < numberOfTriangles; _i9++) {\n      if (_i9 % 2 === 0) {\n        newIndices.push(index.getX(_i9));\n        newIndices.push(index.getX(_i9 + 1));\n        newIndices.push(index.getX(_i9 + 2));\n      } else {\n        newIndices.push(index.getX(_i9 + 2));\n        newIndices.push(index.getX(_i9 + 1));\n        newIndices.push(index.getX(_i9));\n      }\n    }\n  }\n\n  if (newIndices.length / 3 !== numberOfTriangles) {\n    console.error('THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.');\n  } // build final geometry\n\n\n  var newGeometry = geometry.clone();\n  newGeometry.setIndex(newIndices);\n  return newGeometry;\n}\n\nexport { GLTFLoader };","import _createClass from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _assertThisInitialized from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/home/dsplvd/Documents/curva-luz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { EventDispatcher, MOUSE, Quaternion, Spherical, TOUCH, Vector2, Vector3 } from 'three'; // This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar _changeEvent = {\n  type: 'change'\n};\nvar _startEvent = {\n  type: 'start'\n};\nvar _endEvent = {\n  type: 'end'\n};\n\nvar OrbitControls = /*#__PURE__*/function (_EventDispatcher) {\n  _inherits(OrbitControls, _EventDispatcher);\n\n  var _super = _createSuper(OrbitControls);\n\n  function OrbitControls(object, domElement) {\n    var _this;\n\n    _classCallCheck(this, OrbitControls);\n\n    _this = _super.call(this);\n    if (domElement === undefined) console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.');\n    if (domElement === document) console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n    _this.object = object;\n    _this.domElement = domElement;\n    _this.domElement.style.touchAction = 'none'; // disable touch scroll\n    // Set to false to disable this control\n\n    _this.enabled = true; // \"target\" sets the location of focus, where the object orbits around\n\n    _this.target = new Vector3(); // How far you can dolly in and out ( PerspectiveCamera only )\n\n    _this.minDistance = 0;\n    _this.maxDistance = Infinity; // How far you can zoom in and out ( OrthographicCamera only )\n\n    _this.minZoom = 0;\n    _this.maxZoom = Infinity; // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n\n    _this.minPolarAngle = 0; // radians\n\n    _this.maxPolarAngle = Math.PI; // radians\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\n    _this.minAzimuthAngle = -Infinity; // radians\n\n    _this.maxAzimuthAngle = Infinity; // radians\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n\n    _this.enableDamping = false;\n    _this.dampingFactor = 0.05; // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n    // Set to false to disable zooming\n\n    _this.enableZoom = true;\n    _this.zoomSpeed = 1.0; // Set to false to disable rotating\n\n    _this.enableRotate = true;\n    _this.rotateSpeed = 1.0; // Set to false to disable panning\n\n    _this.enablePan = true;\n    _this.panSpeed = 1.0;\n    _this.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\n    _this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n    // Set to true to automatically rotate around the target\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\n\n    _this.autoRotate = false;\n    _this.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n    // The four arrow keys\n\n    _this.keys = {\n      LEFT: 'ArrowLeft',\n      UP: 'ArrowUp',\n      RIGHT: 'ArrowRight',\n      BOTTOM: 'ArrowDown'\n    }; // Mouse buttons\n\n    _this.mouseButtons = {\n      LEFT: MOUSE.ROTATE,\n      MIDDLE: MOUSE.DOLLY,\n      RIGHT: MOUSE.PAN\n    }; // Touch fingers\n\n    _this.touches = {\n      ONE: TOUCH.ROTATE,\n      TWO: TOUCH.DOLLY_PAN\n    }; // for reset\n\n    _this.target0 = _this.target.clone();\n    _this.position0 = _this.object.position.clone();\n    _this.zoom0 = _this.object.zoom; // the target DOM element for key events\n\n    _this._domElementKeyEvents = null; //\n    // public methods\n    //\n\n    _this.getPolarAngle = function () {\n      return spherical.phi;\n    };\n\n    _this.getAzimuthalAngle = function () {\n      return spherical.theta;\n    };\n\n    _this.getDistance = function () {\n      return this.object.position.distanceTo(this.target);\n    };\n\n    _this.listenToKeyEvents = function (domElement) {\n      domElement.addEventListener('keydown', onKeyDown);\n      this._domElementKeyEvents = domElement;\n    };\n\n    _this.saveState = function () {\n      scope.target0.copy(scope.target);\n      scope.position0.copy(scope.object.position);\n      scope.zoom0 = scope.object.zoom;\n    };\n\n    _this.reset = function () {\n      scope.target.copy(scope.target0);\n      scope.object.position.copy(scope.position0);\n      scope.object.zoom = scope.zoom0;\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(_changeEvent);\n      scope.update();\n      state = STATE.NONE;\n    }; // this method is exposed, but perhaps it would be better if we can make it private...\n\n\n    _this.update = function () {\n      var offset = new Vector3(); // so camera.up is the orbit axis\n\n      var quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\n      var quatInverse = quat.clone().invert();\n      var lastPosition = new Vector3();\n      var lastQuaternion = new Quaternion();\n      var twoPI = 2 * Math.PI;\n      return function update() {\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target); // rotate offset to \"y-axis-is-up\" space\n\n        offset.applyQuaternion(quat); // angle from z-axis around y-axis\n\n        spherical.setFromVector3(offset);\n\n        if (scope.autoRotate && state === STATE.NONE) {\n          rotateLeft(getAutoRotationAngle());\n        }\n\n        if (scope.enableDamping) {\n          spherical.theta += sphericalDelta.theta * scope.dampingFactor;\n          spherical.phi += sphericalDelta.phi * scope.dampingFactor;\n        } else {\n          spherical.theta += sphericalDelta.theta;\n          spherical.phi += sphericalDelta.phi;\n        } // restrict theta to be between desired limits\n\n\n        var min = scope.minAzimuthAngle;\n        var max = scope.maxAzimuthAngle;\n\n        if (isFinite(min) && isFinite(max)) {\n          if (min < -Math.PI) min += twoPI;else if (min > Math.PI) min -= twoPI;\n          if (max < -Math.PI) max += twoPI;else if (max > Math.PI) max -= twoPI;\n\n          if (min <= max) {\n            spherical.theta = Math.max(min, Math.min(max, spherical.theta));\n          } else {\n            spherical.theta = spherical.theta > (min + max) / 2 ? Math.max(min, spherical.theta) : Math.min(max, spherical.theta);\n          }\n        } // restrict phi to be between desired limits\n\n\n        spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n        spherical.makeSafe();\n        spherical.radius *= scale; // restrict radius to be between desired limits\n\n        spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius)); // move target to panned location\n\n        if (scope.enableDamping === true) {\n          scope.target.addScaledVector(panOffset, scope.dampingFactor);\n        } else {\n          scope.target.add(panOffset);\n        }\n\n        offset.setFromSpherical(spherical); // rotate offset back to \"camera-up-vector-is-up\" space\n\n        offset.applyQuaternion(quatInverse);\n        position.copy(scope.target).add(offset);\n        scope.object.lookAt(scope.target);\n\n        if (scope.enableDamping === true) {\n          sphericalDelta.theta *= 1 - scope.dampingFactor;\n          sphericalDelta.phi *= 1 - scope.dampingFactor;\n          panOffset.multiplyScalar(1 - scope.dampingFactor);\n        } else {\n          sphericalDelta.set(0, 0, 0);\n          panOffset.set(0, 0, 0);\n        }\n\n        scale = 1; // update condition is:\n        // min(camera displacement, camera rotation in radians)^2 > EPS\n        // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n        if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n          scope.dispatchEvent(_changeEvent);\n          lastPosition.copy(scope.object.position);\n          lastQuaternion.copy(scope.object.quaternion);\n          zoomChanged = false;\n          return true;\n        }\n\n        return false;\n      };\n    }();\n\n    _this.dispose = function () {\n      scope.domElement.removeEventListener('contextmenu', onContextMenu);\n      scope.domElement.removeEventListener('pointerdown', onPointerDown);\n      scope.domElement.removeEventListener('pointercancel', onPointerCancel);\n      scope.domElement.removeEventListener('wheel', onMouseWheel);\n      scope.domElement.removeEventListener('pointermove', onPointerMove);\n      scope.domElement.removeEventListener('pointerup', onPointerUp);\n\n      if (scope._domElementKeyEvents !== null) {\n        scope._domElementKeyEvents.removeEventListener('keydown', onKeyDown);\n      } //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n    }; //\n    // internals\n    //\n\n\n    var scope = _assertThisInitialized(_this);\n\n    var STATE = {\n      NONE: -1,\n      ROTATE: 0,\n      DOLLY: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_PAN: 4,\n      TOUCH_DOLLY_PAN: 5,\n      TOUCH_DOLLY_ROTATE: 6\n    };\n    var state = STATE.NONE;\n    var EPS = 0.000001; // current position in spherical coordinates\n\n    var spherical = new Spherical();\n    var sphericalDelta = new Spherical();\n    var scale = 1;\n    var panOffset = new Vector3();\n    var zoomChanged = false;\n    var rotateStart = new Vector2();\n    var rotateEnd = new Vector2();\n    var rotateDelta = new Vector2();\n    var panStart = new Vector2();\n    var panEnd = new Vector2();\n    var panDelta = new Vector2();\n    var dollyStart = new Vector2();\n    var dollyEnd = new Vector2();\n    var dollyDelta = new Vector2();\n    var pointers = [];\n    var pointerPositions = {};\n\n    function getAutoRotationAngle() {\n      return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n    }\n\n    function getZoomScale() {\n      return Math.pow(0.95, scope.zoomSpeed);\n    }\n\n    function rotateLeft(angle) {\n      sphericalDelta.theta -= angle;\n    }\n\n    function rotateUp(angle) {\n      sphericalDelta.phi -= angle;\n    }\n\n    var panLeft = function () {\n      var v = new Vector3();\n      return function panLeft(distance, objectMatrix) {\n        v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n\n        v.multiplyScalar(-distance);\n        panOffset.add(v);\n      };\n    }();\n\n    var panUp = function () {\n      var v = new Vector3();\n      return function panUp(distance, objectMatrix) {\n        if (scope.screenSpacePanning === true) {\n          v.setFromMatrixColumn(objectMatrix, 1);\n        } else {\n          v.setFromMatrixColumn(objectMatrix, 0);\n          v.crossVectors(scope.object.up, v);\n        }\n\n        v.multiplyScalar(distance);\n        panOffset.add(v);\n      };\n    }(); // deltaX and deltaY are in pixels; right and down are positive\n\n\n    var pan = function () {\n      var offset = new Vector3();\n      return function pan(deltaX, deltaY) {\n        var element = scope.domElement;\n\n        if (scope.object.isPerspectiveCamera) {\n          // perspective\n          var position = scope.object.position;\n          offset.copy(position).sub(scope.target);\n          var targetDistance = offset.length(); // half of the fov is center to top of screen\n\n          targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0); // we use only clientHeight here so aspect ratio does not distort speed\n\n          panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n          panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n        } else if (scope.object.isOrthographicCamera) {\n          // orthographic\n          panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n          panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n        } else {\n          // camera neither orthographic nor perspective\n          console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n          scope.enablePan = false;\n        }\n      };\n    }();\n\n    function dollyOut(dollyScale) {\n      if (scope.object.isPerspectiveCamera) {\n        scale /= dollyScale;\n      } else if (scope.object.isOrthographicCamera) {\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n        scope.enableZoom = false;\n      }\n    }\n\n    function dollyIn(dollyScale) {\n      if (scope.object.isPerspectiveCamera) {\n        scale *= dollyScale;\n      } else if (scope.object.isOrthographicCamera) {\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n        scope.enableZoom = false;\n      }\n    } //\n    // event callbacks - update the object state\n    //\n\n\n    function handleMouseDownRotate(event) {\n      rotateStart.set(event.clientX, event.clientY);\n    }\n\n    function handleMouseDownDolly(event) {\n      dollyStart.set(event.clientX, event.clientY);\n    }\n\n    function handleMouseDownPan(event) {\n      panStart.set(event.clientX, event.clientY);\n    }\n\n    function handleMouseMoveRotate(event) {\n      rotateEnd.set(event.clientX, event.clientY);\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n      var element = scope.domElement;\n      rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n      rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n      rotateStart.copy(rotateEnd);\n      scope.update();\n    }\n\n    function handleMouseMoveDolly(event) {\n      dollyEnd.set(event.clientX, event.clientY);\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n\n      if (dollyDelta.y > 0) {\n        dollyOut(getZoomScale());\n      } else if (dollyDelta.y < 0) {\n        dollyIn(getZoomScale());\n      }\n\n      dollyStart.copy(dollyEnd);\n      scope.update();\n    }\n\n    function handleMouseMovePan(event) {\n      panEnd.set(event.clientX, event.clientY);\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n      pan(panDelta.x, panDelta.y);\n      panStart.copy(panEnd);\n      scope.update();\n    }\n\n    function handleMouseWheel(event) {\n      if (event.deltaY < 0) {\n        dollyIn(getZoomScale());\n      } else if (event.deltaY > 0) {\n        dollyOut(getZoomScale());\n      }\n\n      scope.update();\n    }\n\n    function handleKeyDown(event) {\n      var needsUpdate = false;\n\n      switch (event.code) {\n        case scope.keys.UP:\n          pan(0, scope.keyPanSpeed);\n          needsUpdate = true;\n          break;\n\n        case scope.keys.BOTTOM:\n          pan(0, -scope.keyPanSpeed);\n          needsUpdate = true;\n          break;\n\n        case scope.keys.LEFT:\n          pan(scope.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n\n        case scope.keys.RIGHT:\n          pan(-scope.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n      }\n\n      if (needsUpdate) {\n        // prevent the browser from scrolling on cursor keys\n        event.preventDefault();\n        scope.update();\n      }\n    }\n\n    function handleTouchStartRotate() {\n      if (pointers.length === 1) {\n        rotateStart.set(pointers[0].pageX, pointers[0].pageY);\n      } else {\n        var x = 0.5 * (pointers[0].pageX + pointers[1].pageX);\n        var y = 0.5 * (pointers[0].pageY + pointers[1].pageY);\n        rotateStart.set(x, y);\n      }\n    }\n\n    function handleTouchStartPan() {\n      if (pointers.length === 1) {\n        panStart.set(pointers[0].pageX, pointers[0].pageY);\n      } else {\n        var x = 0.5 * (pointers[0].pageX + pointers[1].pageX);\n        var y = 0.5 * (pointers[0].pageY + pointers[1].pageY);\n        panStart.set(x, y);\n      }\n    }\n\n    function handleTouchStartDolly() {\n      var dx = pointers[0].pageX - pointers[1].pageX;\n      var dy = pointers[0].pageY - pointers[1].pageY;\n      var distance = Math.sqrt(dx * dx + dy * dy);\n      dollyStart.set(0, distance);\n    }\n\n    function handleTouchStartDollyPan() {\n      if (scope.enableZoom) handleTouchStartDolly();\n      if (scope.enablePan) handleTouchStartPan();\n    }\n\n    function handleTouchStartDollyRotate() {\n      if (scope.enableZoom) handleTouchStartDolly();\n      if (scope.enableRotate) handleTouchStartRotate();\n    }\n\n    function handleTouchMoveRotate(event) {\n      if (pointers.length == 1) {\n        rotateEnd.set(event.pageX, event.pageY);\n      } else {\n        var position = getSecondPointerPosition(event);\n        var x = 0.5 * (event.pageX + position.x);\n        var y = 0.5 * (event.pageY + position.y);\n        rotateEnd.set(x, y);\n      }\n\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n      var element = scope.domElement;\n      rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n      rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n      rotateStart.copy(rotateEnd);\n    }\n\n    function handleTouchMovePan(event) {\n      if (pointers.length === 1) {\n        panEnd.set(event.pageX, event.pageY);\n      } else {\n        var position = getSecondPointerPosition(event);\n        var x = 0.5 * (event.pageX + position.x);\n        var y = 0.5 * (event.pageY + position.y);\n        panEnd.set(x, y);\n      }\n\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n      pan(panDelta.x, panDelta.y);\n      panStart.copy(panEnd);\n    }\n\n    function handleTouchMoveDolly(event) {\n      var position = getSecondPointerPosition(event);\n      var dx = event.pageX - position.x;\n      var dy = event.pageY - position.y;\n      var distance = Math.sqrt(dx * dx + dy * dy);\n      dollyEnd.set(0, distance);\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n      dollyOut(dollyDelta.y);\n      dollyStart.copy(dollyEnd);\n    }\n\n    function handleTouchMoveDollyPan(event) {\n      if (scope.enableZoom) handleTouchMoveDolly(event);\n      if (scope.enablePan) handleTouchMovePan(event);\n    }\n\n    function handleTouchMoveDollyRotate(event) {\n      if (scope.enableZoom) handleTouchMoveDolly(event);\n      if (scope.enableRotate) handleTouchMoveRotate(event);\n    } //\n    // event handlers - FSM: listen for events and reset state\n    //\n\n\n    function onPointerDown(event) {\n      if (scope.enabled === false) return;\n\n      if (pointers.length === 0) {\n        scope.domElement.setPointerCapture(event.pointerId);\n        scope.domElement.addEventListener('pointermove', onPointerMove);\n        scope.domElement.addEventListener('pointerup', onPointerUp);\n      } //\n\n\n      addPointer(event);\n\n      if (event.pointerType === 'touch') {\n        onTouchStart(event);\n      } else {\n        onMouseDown(event);\n      }\n    }\n\n    function onPointerMove(event) {\n      if (scope.enabled === false) return;\n\n      if (event.pointerType === 'touch') {\n        onTouchMove(event);\n      } else {\n        onMouseMove(event);\n      }\n    }\n\n    function onPointerUp(event) {\n      removePointer(event);\n\n      if (pointers.length === 0) {\n        scope.domElement.releasePointerCapture(event.pointerId);\n        scope.domElement.removeEventListener('pointermove', onPointerMove);\n        scope.domElement.removeEventListener('pointerup', onPointerUp);\n      }\n\n      scope.dispatchEvent(_endEvent);\n      state = STATE.NONE;\n    }\n\n    function onPointerCancel(event) {\n      removePointer(event);\n    }\n\n    function onMouseDown(event) {\n      var mouseAction;\n\n      switch (event.button) {\n        case 0:\n          mouseAction = scope.mouseButtons.LEFT;\n          break;\n\n        case 1:\n          mouseAction = scope.mouseButtons.MIDDLE;\n          break;\n\n        case 2:\n          mouseAction = scope.mouseButtons.RIGHT;\n          break;\n\n        default:\n          mouseAction = -1;\n      }\n\n      switch (mouseAction) {\n        case MOUSE.DOLLY:\n          if (scope.enableZoom === false) return;\n          handleMouseDownDolly(event);\n          state = STATE.DOLLY;\n          break;\n\n        case MOUSE.ROTATE:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (scope.enablePan === false) return;\n            handleMouseDownPan(event);\n            state = STATE.PAN;\n          } else {\n            if (scope.enableRotate === false) return;\n            handleMouseDownRotate(event);\n            state = STATE.ROTATE;\n          }\n\n          break;\n\n        case MOUSE.PAN:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (scope.enableRotate === false) return;\n            handleMouseDownRotate(event);\n            state = STATE.ROTATE;\n          } else {\n            if (scope.enablePan === false) return;\n            handleMouseDownPan(event);\n            state = STATE.PAN;\n          }\n\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n\n      if (state !== STATE.NONE) {\n        scope.dispatchEvent(_startEvent);\n      }\n    }\n\n    function onMouseMove(event) {\n      if (scope.enabled === false) return;\n\n      switch (state) {\n        case STATE.ROTATE:\n          if (scope.enableRotate === false) return;\n          handleMouseMoveRotate(event);\n          break;\n\n        case STATE.DOLLY:\n          if (scope.enableZoom === false) return;\n          handleMouseMoveDolly(event);\n          break;\n\n        case STATE.PAN:\n          if (scope.enablePan === false) return;\n          handleMouseMovePan(event);\n          break;\n      }\n    }\n\n    function onMouseWheel(event) {\n      if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE) return;\n      event.preventDefault();\n      scope.dispatchEvent(_startEvent);\n      handleMouseWheel(event);\n      scope.dispatchEvent(_endEvent);\n    }\n\n    function onKeyDown(event) {\n      if (scope.enabled === false || scope.enablePan === false) return;\n      handleKeyDown(event);\n    }\n\n    function onTouchStart(event) {\n      trackPointer(event);\n\n      switch (pointers.length) {\n        case 1:\n          switch (scope.touches.ONE) {\n            case TOUCH.ROTATE:\n              if (scope.enableRotate === false) return;\n              handleTouchStartRotate();\n              state = STATE.TOUCH_ROTATE;\n              break;\n\n            case TOUCH.PAN:\n              if (scope.enablePan === false) return;\n              handleTouchStartPan();\n              state = STATE.TOUCH_PAN;\n              break;\n\n            default:\n              state = STATE.NONE;\n          }\n\n          break;\n\n        case 2:\n          switch (scope.touches.TWO) {\n            case TOUCH.DOLLY_PAN:\n              if (scope.enableZoom === false && scope.enablePan === false) return;\n              handleTouchStartDollyPan();\n              state = STATE.TOUCH_DOLLY_PAN;\n              break;\n\n            case TOUCH.DOLLY_ROTATE:\n              if (scope.enableZoom === false && scope.enableRotate === false) return;\n              handleTouchStartDollyRotate();\n              state = STATE.TOUCH_DOLLY_ROTATE;\n              break;\n\n            default:\n              state = STATE.NONE;\n          }\n\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n\n      if (state !== STATE.NONE) {\n        scope.dispatchEvent(_startEvent);\n      }\n    }\n\n    function onTouchMove(event) {\n      trackPointer(event);\n\n      switch (state) {\n        case STATE.TOUCH_ROTATE:\n          if (scope.enableRotate === false) return;\n          handleTouchMoveRotate(event);\n          scope.update();\n          break;\n\n        case STATE.TOUCH_PAN:\n          if (scope.enablePan === false) return;\n          handleTouchMovePan(event);\n          scope.update();\n          break;\n\n        case STATE.TOUCH_DOLLY_PAN:\n          if (scope.enableZoom === false && scope.enablePan === false) return;\n          handleTouchMoveDollyPan(event);\n          scope.update();\n          break;\n\n        case STATE.TOUCH_DOLLY_ROTATE:\n          if (scope.enableZoom === false && scope.enableRotate === false) return;\n          handleTouchMoveDollyRotate(event);\n          scope.update();\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n    }\n\n    function onContextMenu(event) {\n      if (scope.enabled === false) return;\n      event.preventDefault();\n    }\n\n    function addPointer(event) {\n      pointers.push(event);\n    }\n\n    function removePointer(event) {\n      delete pointerPositions[event.pointerId];\n\n      for (var i = 0; i < pointers.length; i++) {\n        if (pointers[i].pointerId == event.pointerId) {\n          pointers.splice(i, 1);\n          return;\n        }\n      }\n    }\n\n    function trackPointer(event) {\n      var position = pointerPositions[event.pointerId];\n\n      if (position === undefined) {\n        position = new Vector2();\n        pointerPositions[event.pointerId] = position;\n      }\n\n      position.set(event.pageX, event.pageY);\n    }\n\n    function getSecondPointerPosition(event) {\n      var pointer = event.pointerId === pointers[0].pointerId ? pointers[1] : pointers[0];\n      return pointerPositions[pointer.pointerId];\n    } //\n\n\n    scope.domElement.addEventListener('contextmenu', onContextMenu);\n    scope.domElement.addEventListener('pointerdown', onPointerDown);\n    scope.domElement.addEventListener('pointercancel', onPointerCancel);\n    scope.domElement.addEventListener('wheel', onMouseWheel, {\n      passive: false\n    }); // force an update at start\n\n    _this.update();\n\n    return _this;\n  }\n\n  return _createClass(OrbitControls);\n}(EventDispatcher); // This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\n\nvar MapControls = /*#__PURE__*/function (_OrbitControls) {\n  _inherits(MapControls, _OrbitControls);\n\n  var _super2 = _createSuper(MapControls);\n\n  function MapControls(object, domElement) {\n    var _this2;\n\n    _classCallCheck(this, MapControls);\n\n    _this2 = _super2.call(this, object, domElement);\n    _this2.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n    _this2.mouseButtons.LEFT = MOUSE.PAN;\n    _this2.mouseButtons.RIGHT = MOUSE.ROTATE;\n    _this2.touches.ONE = TOUCH.PAN;\n    _this2.touches.TWO = TOUCH.DOLLY_ROTATE;\n    return _this2;\n  }\n\n  return _createClass(MapControls);\n}(OrbitControls);\n\nexport { OrbitControls, MapControls };","import * as React from \"react\"\r\nimport { Link, graphql, useStaticQuery } from \"gatsby\"\r\nimport { StaticImage } from \"gatsby-plugin-image\"\r\nimport BackgroundImage from 'gatsby-background-image'\r\n\r\nimport Layout from \"../components/layout\"\r\nimport FullScreenSection from \"../components/full-screen-section\"\r\nimport Seo from \"../components/seo\"\r\n\r\nimport styled from 'styled-components'\r\n\r\nimport * as THREE from \"three\";\r\n\r\nimport { Suspense , useRef, useState, useMemo, useEffect } from 'react';\r\n\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\n// import { LightShadow } from \"three/src/lights/LightShadow\";\r\n\r\n\r\nconst ThreePage = () => {\r\n\r\n  const data = useStaticQuery(\r\n    graphql`\r\n      query {\r\n        bg1:\r\n\r\n        file(relativePath: { eq: \"pointcloud.jpg\" }) {\r\n          childImageSharp {\r\n            fluid(quality: 90, maxWidth: 1920) {\r\n              ...GatsbyImageSharpFluid_noBase64\r\n            }\r\n          }\r\n        }\r\n\r\n        bg2:\r\n        file(relativePath: { eq: \"obj.jpg\" }) {\r\n          childImageSharp {\r\n            fluid(quality: 90, maxWidth: 1920) {\r\n              ...GatsbyImageSharpFluid_noBase64\r\n            }\r\n          }\r\n        }\r\n\r\n      }\r\n    `\r\n  )\r\n\r\n  const bg1 = data.bg1.childImageSharp.fluid\r\n  const bg2 = data.bg2.childImageSharp.fluid\r\n\r\nconst Vis = () => {\r\n\r\n  const { useRef, useEffect, useState } = React\r\n  const mount = useRef(null)\r\n  const [isAnimating, setAnimating] = useState(true)\r\n  // const controls = useRef(null)\r\n  \r\n  useEffect(() => {\r\n\r\n    let width = window.innerWidth-200;\r\n    let height = window.innerHeight;\r\n    let frameId\r\n\r\n    const scene = new THREE.Scene()\r\n    const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000)\r\n    \r\n    const renderer = new THREE.WebGLRenderer({ antialias: true })\r\n\r\n    // const light = new THREE.PointLight(0xFFFFFF);\r\n    const light = new THREE.AmbientLight(0xFFFFFF, 0.75);\r\n    light.position.x = 0;\r\n    light.position.y = 4;\r\n    light.position.z = 0;\r\n    scene.add(light);\r\n\r\n    // renderer.shadowMap.enabled = true;\r\n    // renderer.shadowMap.type = THREE.PCFShadowMap;\r\n\r\n    // light.castShadow = true;\r\n    // light.shadow = new THREE.LightShadow( new THREE.PerspectiveCamera( 50, 1, 10, 2500 ) );\r\n    // light.shadow.bias = 0.0001;\r\n    // light.shadow.mapSize.width = 2048;\r\n    // light.shadow.mapSize.height = 1024;    \r\n\r\n    \r\n    const controls = new OrbitControls( camera, renderer.domElement );\r\n\r\n    const loader = new GLTFLoader();\r\n\r\n    loader.load(\r\n      // resource URL\r\n      '/3dcdll_texturas_1024.glb',\r\n      // called when the resource is loaded\r\n      function ( gltf ) {\r\n\r\n        // console.dir(gltf);\r\n\r\n        scene.add( gltf.scene );\r\n\r\n        // gltf.animations; // Array<THREE.AnimationClip>\r\n        // gltf.scene; // THREE.Group\r\n        // gltf.scenes; // Array<THREE.Group>\r\n        // gltf.cameras; // Array<THREE.Camera>\r\n        // gltf.asset; // Object\r\n\r\n      },\r\n      // called while loading is progressing\r\n      function ( xhr ) {\r\n\r\n        // console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );\r\n\r\n      },\r\n      // called when loading has errors\r\n      function ( error ) {\r\n\r\n        console.log( 'An error happened' );\r\n\r\n      }\r\n    );    \r\n\r\n    camera.position.z = 4\r\n\r\n    controls.update();\r\n    \r\n    // scene.add(cube)\r\n    renderer.setClearColor('#FFFFFF')\r\n    renderer.setSize(width, height)\r\n\r\n    const renderScene = () => {\r\n      renderer.render(scene, camera)\r\n    }\r\n\r\n    const handleResize = () => {\r\n      width = mount.current.clientWidth\r\n      height = mount.current.clientHeight\r\n      renderer.setSize(width, height)\r\n      camera.aspect = width / height\r\n      camera.updateProjectionMatrix()\r\n      renderScene()\r\n    }\r\n    \r\n    const animate = () => {\r\n      // cube.rotation.x += 0.01\r\n      // cube.rotation.y += 0.01\r\n\r\n      renderScene()\r\n      frameId = window.requestAnimationFrame(animate)\r\n      \r\n    }\r\n\r\n    const start = () => {\r\n      if (!frameId) {\r\n        frameId = requestAnimationFrame(animate)\r\n      }\r\n    }\r\n\r\n    const stop = () => {\r\n      cancelAnimationFrame(frameId)\r\n      frameId = null\r\n    }\r\n\r\n    mount.current.appendChild(renderer.domElement)\r\n    window.addEventListener('resize', handleResize)\r\n    start()\r\n\r\n    // controls.current = { start, stop }\r\n    \r\n    return () => {\r\n      stop()\r\n      window.removeEventListener('resize', handleResize)\r\n      mount.current.removeChild(renderer.domElement)\r\n\r\n      // scene.remove(cube)\r\n      // geometry.dispose()\r\n      // material.dispose()\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (isAnimating) {\r\n      // controls.current.start()\r\n    } else {\r\n      // controls.current.stop()\r\n    }\r\n  }, [isAnimating])\r\n  \r\n  return <div className=\"vis h-100\" ref={mount} onClick={() => setAnimating(!isAnimating)} />\r\n}\r\n\r\n  return (\r\n    <Layout>\r\n      <Seo title=\"Home\" />\r\n\r\n      <FullScreenSection>\r\n\r\n        <BackgroundImage\r\n          Tag=\"section\"\r\n          className={'container-fluid fullheight-ribbon d-flex flex-column'}\r\n          fluid={bg1}\r\n          backgroundColor={`#040e18`}\r\n        >\r\n\r\n            <div className={`row flex-1`}>\r\n              <div className={`col flex-1`}>\r\n\r\n\r\n              <Vis />\r\n\r\n              </div>         \r\n            </div>\r\n            <div className={`row ribbon no-gutters`}>\r\n\r\n            \t<div className={`col-3 ribbon-blue`}></div>\r\n            \t<div className={`col-2 ribbon-red`}></div>\r\n            \t<div className={`col-4 ribbon-navy`}></div>\r\n            \t<div className={`col-3 ribbon-gray`}></div>\r\n\r\n            </div>\r\n\r\n        </BackgroundImage>\r\n\r\n      </FullScreenSection>   \r\n\r\n    </Layout>\r\n  )\r\n\r\n}\r\n\r\nconst StyledBackgroundSection = styled(ThreePage)`\r\n  width: 100%;\r\n  background-position: bottom center;\r\n  background-repeat: repeat-y;\r\n  background-size: cover;\r\n`\r\n\r\nexport default ThreePage\r\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["global","isConstructor","tryToString","TypeError","module","exports","argument","Promise","aCallable","PromiseCapability","C","resolve","reject","this","promise","$$resolve","$$reject","undefined","f","anObject","isObject","newPromiseCapability","x","constructor","promiseCapability","aConstructor","SPECIES","wellKnownSymbol","O","defaultConstructor","S","$","IS_PURE","NativePromise","fails","getBuiltIn","isCallable","speciesConstructor","promiseResolve","redefine","target","proto","real","forced","prototype","call","then","onFinally","isFunction","e","method","unsafe","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","toString","slice","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","_e","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","result","Super","NewTarget","arguments","apply","GLTFLoader","_Loader","_super","manager","_this","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsSpecularExtension","GLTFLightsExtension","GLTFMeshoptCompression","key","url","onLoad","onProgress","onError","resourcePath","scope","path","LoaderUtils","itemStart","_onError","console","error","itemError","itemEnd","loader","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","load","data","parse","gltf","Error","callback","indexOf","push","splice","content","extensions","plugins","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","asset","version","GLTFParser","crossOrigin","fileLoader","plugin","extensionsUsed","_i","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","warn","setExtensions","setPlugins","Loader","GLTFRegistry","objects","get","add","object","remove","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_IOR","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","cache","refs","uses","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","light","_addNodeRef","lightIndex","cacheKey","dependency","lightNode","lightDef","lights","color","Color","fromArray","range","type","DirectionalLight","position","set","PointLight","distance","SpotLight","spot","innerConeAngle","outerConeAngle","Math","PI","angle","penumbra","decay","intensity","createUniqueName","self","_loadLight","_getNodeRef","MeshBasicMaterial","materialParams","materialDef","pending","opacity","metallicRoughness","pbrMetallicRoughness","baseColorFactor","array","baseColorTexture","assignTexture","all","materialIndex","materials","MeshPhysicalMaterial","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","scale","clearcoatNormalScale","Vector2","sheenColor","sheenRoughness","sheen","sheenColorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","transmissionFactor","transmission","transmissionTexture","thickness","thicknessFactor","thicknessTexture","attenuationDistance","colorArray","attenuationColor","ior","specularIntensity","specularFactor","specularTexture","specularColorFactor","specularColor","specularColorTexture","texture","encoding","sRGBEncoding","textureIndex","textureDef","textures","source","images","options","loadTextureImage","isSupported","textureLoader","uri","handler","getHandler","detectSupport","loadTexture","image","Image","src","onload","onerror","height","index","bufferView","bufferViews","extensionDef","buffer","getDependency","decoder","supported","ready","res","byteOffset","byteLength","count","stride","byteStride","ArrayBuffer","decodeGltfBuffer","mode","filter","BINARY_EXTENSION_CHUNK_TYPES","body","headerView","DataView","header","magic","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","preload","primitive","bufferViewIndex","gltfAttributeMap","attributes","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","toLowerCase","_attributeName","_threeAttributeName","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","decodeDracoFile","geometry","_attributeName2","attribute","transform","texCoord","offset","rotation","clone","repeat","needsUpdate","GLTFMeshStandardSGMaterial","_MeshStandardMaterial","_super2","params","_this2","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","uniforms","specular","setHex","glossiness","specularMap","glossinessMap","_extraUniforms","onBeforeCompile","shader","uniformName","fragmentShader","replace","defineProperties","v","defines","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","metalness","roughness","metalnessMap","roughnessMap","setValues","copy","MeshStandardMaterial","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularGlossinessTexture","specGlossMapDef","material","fog","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","TangentSpaceNormalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","_Interpolant","_super3","parameterPositions","sampleValues","sampleSize","resultBuffer","values","valueSize","Interpolant","beforeStart_","copySampleValue_","afterEnd_","interpolate_","i1","t0","t","t1","stride2","stride3","td","p","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","_q","Quaternion","GLTFCubicSplineQuaternionInterpolant","_GLTFCubicSplineInter","_super4","normalize","toArray","WEBGL_CONSTANTS","Int8Array","Int16Array","Uint16Array","Uint32Array","Float32Array","WEBGL_FILTERS","NearestFilter","LinearFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","ClampToEdgeWrapping","MirroredRepeatWrapping","RepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","LINEAR","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","assign","updateMorphTargets","mesh","meshDef","il","morphTargetInfluences","targetNames","morphTargetDictionary","_i3","_il2","createAttributesKey","attributesKey","keys","sort","getNormalizedComponentScale","associations","Map","primitiveCache","meshCache","cameraCache","lightCache","textureCache","nodeNamesUsed","createImageBitmap","navigator","userAgent","ImageBitmapLoader","TextureLoader","setCrossOrigin","_invokeAll","ext","_markDefs","beforeRoot","getDependencies","dependencies","scene","scenes","animations","cameras","afterRoot","catch","skinDefs","skins","meshDefs","meshes","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","camera","_this3","ref","updateMappings","original","mappings","_step","_iterator","children","entries","_step$value","func","unshift","loadScene","loadNode","_invokeOne","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","bufferViewDef","accessorIndex","sparse","pendingBufferViews","indices","bufferAttribute","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","ibSlice","floor","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","BufferAttribute","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","sampler","URL","webkitURL","sourceURI","isObjectURL","blob","Blob","mimeType","createObjectURL","isImageBitmapLoader","imageBitmap","Texture","revokeObjectURL","flipY","samplers","magFilter","minFilter","wrapS","wrapT","mapName","mapDef","gltfReference","extendTexture","useDerivativeTangents","tangent","useVertexColors","useFlatShading","normal","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","_cacheKey","lineMaterial","LineBasicMaterial","_cacheKey2","cachedMaterial","vertexColors","flatShading","y","uv2","uv","setAttribute","materialType","materialExtensions","sgExtension","getMaterialType","extendParams","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","extendMaterialParams","doubleSided","side","DoubleSide","alphaMode","transparent","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","createMaterial","originalName","sanitizedName","PropertyBinding","primitives","createDracoPrimitive","decodePrimitive","addPrimitiveAttributes","primitiveDef","dracoExtension","cached","geometryPromise","BufferGeometry","meshIndex","depthTest","FrontSide","loadGeometries","results","geometries","_i4","_il3","_material","SkinnedMesh","Mesh","skinWeight","normalizeSkinWeights","toTrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LineSegments","Line","LineLoop","Points","morphAttributes","assignFinalMaterial","_i5","_il4","group","Group","_i6","_il5","cameraIndex","cameraDef","PerspectiveCamera","MathUtils","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","accessor","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","id","input","parameters","output","inputAccessors","outputAccessors","targets","tracks","_loop","_i7","_il6","inputAccessor","outputAccessor","updateMatrix","matrixAutoUpdate","TypedKeyframeTrack","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","traverse","outputArray","scaled","j","jl","_j","_jl","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","isMesh","meshPromise","nodeName","createNodeMesh","createNodeAttachment","forEach","Bone","Object3D","matrix","Matrix4","applyMatrix4","quaternion","has","sceneIndex","sceneDef","nodeIds","buildNodeHierarchy","_step2","reducedAssociations","_iterator2","_step2$value","reduceAssociations","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","mat","bind","Skeleton","matrixWorld","child","assignAttributeAccessor","gltfAttributeName","setIndex","box","Box3","min","max","Vector3","boxScale","multiplyScalar","maxDisplacement","vector","_accessor","_min","_max","abs","_boxScale","expandByVector","boundingBox","sphere","Sphere","getCenter","center","radius","distanceTo","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","_i2","_il","_target","pendingAccessor","_pendingAccessor","morphPositions","morphNormals","morphTargetsRelative","addMorphTargets","drawMode","getIndex","getAttribute","numberOfTriangles","newIndices","_i8","getX","_i9","newGeometry","_changeEvent","_startEvent","_endEvent","OrbitControls","_EventDispatcher","domElement","quat","quatInverse","lastPosition","lastQuaternion","twoPI","document","style","touchAction","enabled","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","MIDDLE","touches","ONE","TOUCH","TWO","target0","position0","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","getDistance","listenToKeyEvents","addEventListener","onKeyDown","saveState","reset","updateProjectionMatrix","dispatchEvent","update","state","STATE","NONE","setFromUnitVectors","up","invert","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","isFinite","makeSafe","addScaledVector","panOffset","setFromSpherical","lookAt","zoomChanged","distanceToSquared","EPS","dot","dispose","removeEventListener","onContextMenu","onPointerDown","onPointerCancel","onMouseWheel","onPointerMove","onPointerUp","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","pow","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","getSecondPointerPosition","subVectors","handleTouchMovePan","handleTouchMoveDolly","setPointerCapture","pointerId","addPointer","pointerType","trackPointer","onTouchStart","mouseAction","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","onTouchMove","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","removePointer","releasePointerCapture","preventDefault","handleMouseWheel","code","handleKeyDown","pointer","passive","EventDispatcher","ThreePage","useStaticQuery","bg1","childImageSharp","fluid","Vis","bg2","useRef","React","useEffect","useState","mount","isAnimating","setAnimating","frameId","width","window","innerWidth","innerHeight","THREE","renderer","antialias","z","controls","xhr","log","setClearColor","setSize","renderScene","render","handleResize","current","aspect","animate","requestAnimationFrame","appendChild","cancelAnimationFrame","removeChild","className","onClick","title","Tag","backgroundColor","styled","asyncGeneratorStep","gen","_next","_throw","arg","info","_asyncToGenerator","fn","args"],"sourceRoot":""}