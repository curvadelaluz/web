{"version":3,"file":"component---src-pages-vr-js-7ec2d8040dbbcb4fda09.js","mappings":"wNAmBMA,EAAS,WAEb,IAAMC,GAAOC,EAAAA,EAAAA,gBAAe,aA0BtBC,EAAMF,EAAKE,IAAIC,gBAAgBC,MACzBJ,EAAKK,IAAIF,gBAAgBC,MA6CrC,MA3CI,oBAAOE,QAETC,OAAOC,kBAAkB,gBAAiB,CACxCC,KAAM,WACJC,KAAKC,QAAUD,KAAKC,QAAQC,KAAKF,OAEnCG,KAAM,WACJP,OAAOQ,iBAAiB,QAASJ,KAAKC,UAExCI,MAAO,WACLT,OAAOU,oBAAoB,QAASN,KAAKC,UAE3CA,QAAS,SAAUM,GACjB,IAAIC,EAAUR,KAAKS,GAAGC,aAAa,YAAYC,IAC1CH,IACLR,KAAKS,GAAGG,SAASC,SAAU,EAC3BL,EAAQL,WA4BZ,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAKW,MAAM,SAEX,gBAAC,IAAD,KAEE,gBAAC,IAAD,CACEC,IAAI,UACJC,UAAW,uDACXtB,MAAOF,EACPyB,gBAAe,WAGb,uBAAKD,UAAS,cACZ,uBAAKA,UAAS,cAEZ,uBAAKA,UAAS,YACZ,0BAAQE,KAAK,SAASF,UAAS,mCAAqC,qBAAGA,UAAS,kBAChF,0BAAQE,KAAK,SAASF,UAAS,mCAAqC,qBAAGA,UAAS,0BAChF,0BAAQE,KAAK,SAASF,UAAS,mCAA/B,OAGF,+BACE,gCACE,yBAAOG,GAAG,QACHC,MAAI,EACJC,YAAY,YACZC,aAAW,EACXX,IAAI,iBAIb,iCACEY,SAAS,UAAUZ,IAAI,SACvB,qBAGF,gCACE,4BACEa,SAAS,WACT,eAAa,eASvB,uBAAKR,UAAS,yBAEb,uBAAKA,UAAS,sBACd,uBAAKA,UAAS,qBACd,uBAAKA,UAAS,sBACd,uBAAKA,UAAS,4BAaKS,E,KAAAA,IAAOpC,EAAPoC,CAAH,0IAO7B","sources":["webpack://gatsby-starter-default/./src/pages/vr.js"],"sourcesContent":["import * as React from \"react\"\r\nimport { Link, graphql, useStaticQuery } from \"gatsby\"\r\nimport { StaticImage } from \"gatsby-plugin-image\"\r\nimport BackgroundImage from 'gatsby-background-image'\r\n\r\nimport Layout from \"../components/layout\"\r\nimport FullScreenSection from \"../components/full-screen-section\"\r\nimport Seo from \"../components/seo\"\r\n\r\nimport styled from 'styled-components'\r\n\r\n// import 'aframe';\r\n// import 'aframe-particle-system-component';\r\n\r\nimport { Suspense , useRef, useState, useMemo, useEffect } from 'react';\r\n\r\n\r\n// import * as TWEEN from \"@tweenjs/tween.js\";\r\n\r\nconst VrPage = () => {\r\n\r\n  const data = useStaticQuery(\r\n    graphql`\r\n      query {\r\n        bg1:\r\n\r\n        file(relativePath: { eq: \"pointcloud.jpg\" }) {\r\n          childImageSharp {\r\n            fluid(quality: 90, maxWidth: 1920) {\r\n              ...GatsbyImageSharpFluid_noBase64\r\n            }\r\n          }\r\n        }\r\n\r\n        bg2:\r\n        file(relativePath: { eq: \"obj.jpg\" }) {\r\n          childImageSharp {\r\n            fluid(quality: 90, maxWidth: 1920) {\r\n              ...GatsbyImageSharpFluid_noBase64\r\n            }\r\n          }\r\n        }\r\n\r\n      }\r\n    `\r\n  )\r\n\r\n  const bg1 = data.bg1.childImageSharp.fluid\r\n  const bg2 = data.bg2.childImageSharp.fluid\r\n\r\n  if (typeof window !== `undefined`) {\r\n    /* global AFRAME */\r\n    AFRAME.registerComponent('play-on-click', {\r\n      init: function () {\r\n        this.onClick = this.onClick.bind(this);\r\n      },\r\n      play: function () {\r\n        window.addEventListener('click', this.onClick);\r\n      },\r\n      pause: function () {\r\n        window.removeEventListener('click', this.onClick);\r\n      },\r\n      onClick: function (evt) {\r\n        var videoEl = this.el.getAttribute('material').src;\r\n        if (!videoEl) { return; }\r\n        this.el.object3D.visible = true;\r\n        videoEl.play();\r\n      }\r\n    });    \r\n  }\r\n\r\n\r\n\r\n  \r\n  function playVideoOnScroll(element) {\r\n      var vid = element; // select video element\r\n      var playbackConst = 3; // lower numbers = slower playback\r\n      var startingYOffset = element.offsetTop - window.innerHeight;\r\n      vid.pause(); // pause video on load\r\n      \r\n      // pause video on document scroll (stops autoplay once scroll started)\r\n      window.onscroll = function(){\r\n          vid.pause();\r\n      };\r\n      \r\n      // refresh video frames on interval for smoother playback\r\n      setInterval(function(){\r\n          vid.currentTime = (window.pageYOffset-startingYOffset)/(window.innerHeight/playbackConst);\r\n      }, 40);\r\n  }  \r\n\r\n  // playVideoOnScroll(document.querySelector('video'));\r\n\r\n  return (\r\n    <Layout>\r\n      <Seo title=\"Home\" />\r\n\r\n      <FullScreenSection>\r\n\r\n        <BackgroundImage\r\n          Tag=\"section\"\r\n          className={'container-fluid fullheight-ribbon d-flex flex-column'}\r\n          fluid={bg1}\r\n          backgroundColor={`#040e18`}\r\n        >\r\n\r\n            <div className={`row flex-1`}>\r\n              <div className={`col flex-1`}>\r\n\r\n                <div className={`controls`}>\r\n                  <button type=\"button\" className={`btn btn-light btn-sm btn-pausar`}><i className={`fas fa-pause`}></i></button>\r\n                  <button type=\"button\" className={`btn btn-light btn-sm btn-pausar`}><i className={`fas fa-step-backward`}></i></button>\r\n                  <button type=\"button\" className={`btn btn-light btn-sm btn-pausar`}>2x</button>\r\n                </div>\r\n\r\n                <a-scene>\r\n                  <a-assets>\r\n                    <video id=\"video\"\r\n                           loop\r\n                           crossOrigin=\"anonymous\"\r\n                           playsInline\r\n                           src=\"/camen2.mp4\">\r\n                    </video>\r\n                  </a-assets>\r\n\r\n                  <a-videosphere\r\n                    rotation=\"0 -90 0\" src=\"#video\"\r\n                    play-on-click>\r\n                  </a-videosphere>\r\n\r\n                  <a-camera>\r\n                    <a-entity\r\n                      position=\"0 0 -1.5\"\r\n                      hide-on-play=\"#video\">\r\n                    </a-entity>\r\n                  </a-camera>\r\n                </a-scene>\r\n\r\n\r\n\r\n              </div>         \r\n            </div>\r\n            <div className={`row ribbon no-gutters`}>\r\n\r\n            \t<div className={`col-3 ribbon-blue`}></div>\r\n            \t<div className={`col-2 ribbon-red`}></div>\r\n            \t<div className={`col-4 ribbon-navy`}></div>\r\n            \t<div className={`col-3 ribbon-gray`}></div>\r\n\r\n            </div>\r\n\r\n        </BackgroundImage>\r\n\r\n      </FullScreenSection>   \r\n\r\n    </Layout>\r\n  )\r\n\r\n}\r\n\r\nconst StyledBackgroundSection = styled(VrPage)`\r\n  width: 100%;\r\n  background-position: bottom center;\r\n  background-repeat: repeat-y;\r\n  background-size: cover;\r\n`\r\n\r\nexport default VrPage\r\n"],"names":["VrPage","data","useStaticQuery","bg1","childImageSharp","fluid","bg2","window","AFRAME","registerComponent","init","this","onClick","bind","play","addEventListener","pause","removeEventListener","evt","videoEl","el","getAttribute","src","object3D","visible","title","Tag","className","backgroundColor","type","id","loop","crossOrigin","playsInline","rotation","position","styled"],"sourceRoot":""}